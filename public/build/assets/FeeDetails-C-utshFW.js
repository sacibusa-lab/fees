import{r as c,u as z,j as e,H as T,L as M,a as j}from"./app-8SCMTW8O.js";import{L,C as d,a as F}from"./Layout-xUua1U_S.js";import{F as B,a as $}from"./FeeClassOverridesModal-CeiffZUU.js";import{A as v}from"./StudentProfile-DQRlkTAE.js";import{A as D}from"./arrow-left-DrzbCQCF.js";import{I}from"./info-U7MJ9AJC.js";import{c as f}from"./createLucideIcon-DC07x121.js";import{S as O}from"./save-D1LBGppX.js";import{S as g}from"./square-pen-Yl8vTf07.js";import{T as R}from"./trash-2-C4I5ZQ6R.js";import"./circle-alert-BedFCPGt.js";import"./plus-CYtWj5bM.js";const q=[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]],H=f("refresh-ccw",q);const U=[["path",{d:"M16 3h5v5",key:"1806ms"}],["path",{d:"M8 3H3v5",key:"15dfkv"}],["path",{d:"M12 22v-8.3a4 4 0 0 0-1.172-2.872L3 3",key:"1qrqzj"}],["path",{d:"m15 9 6-6",key:"ko1vev"}]],y=f("split",U),E=s=>new Intl.NumberFormat().format(s),ie=({fee:s,bankAccounts:_=[],classes:m=[]})=>{const[r,n]=c.useState("details"),[b,h]=c.useState(!1),[N,x]=c.useState(!1),[P,W]=c.useState("edit"),{data:a,setData:i,put:C,processing:u,errors:l}=z({title:s?.title||"",revenue_code:s?.revenueCode||"",cycle:(s?.cycle||"termly").toLowerCase().replace(" ","-"),type:(s?.type||"compulsory").toLowerCase(),payee_allowed:(s?.payeeAllowed||"students").toLowerCase(),amount:s?.raw_amount||0,first_term_amount:s?.first_term_amount||"",second_term_amount:s?.second_term_amount||"",third_term_amount:s?.third_term_amount||"",first_term_active:s?.first_term_active!==void 0?s.first_term_active:!0,second_term_active:s?.second_term_active!==void 0?s.second_term_active:!0,third_term_active:s?.third_term_active!==void 0?s.third_term_active:!0,charge_bearer:(s?.chargeBear||"self").toLowerCase(),status:(s?.status||"active").toLowerCase()}),w=t=>{t.preventDefault(),C(`/fees/${s.id}`,{onSuccess:()=>alert("Fee updated successfully!")})},k=()=>{confirm("Are you sure you want to delete this fee?")&&j.delete(`/fees/${s.id}`)},S=()=>{j.post(`/fees/${s.id}/toggle-status`)};return e.jsxs(L,{children:[e.jsx(T,{title:`${s.title} - Details`}),e.jsxs("div",{className:"student-profile-container",children:[e.jsxs("div",{className:"profile-header",children:[e.jsxs(M,{href:"/fees",className:"back-link",children:[e.jsx(D,{size:20})," Back to Fees"]}),e.jsxs("div",{className:"profile-summary",children:[e.jsx("div",{className:"profile-avatar-large",children:e.jsx(d,{size:32})}),e.jsxs("div",{className:"profile-info-primary",children:[e.jsx("h1",{children:s.title}),e.jsxs("div",{className:"profile-meta",children:[e.jsx("span",{className:"meta-item",children:s.revenueCode}),e.jsx("span",{className:"meta-dot",children:"•"}),e.jsx("span",{className:"meta-item",children:s.cycle}),e.jsx("span",{className:"meta-dot",children:"•"}),e.jsx("span",{className:`status-pill ${s.status.toLowerCase()}`,children:s.status})]})]})]}),e.jsxs("div",{className:"profile-tabs",children:[e.jsxs("button",{className:`tab-item ${r==="details"?"active":""}`,onClick:()=>n("details"),children:[e.jsx(I,{size:18})," Details"]}),e.jsxs("button",{className:`tab-item ${r==="beneficiaries"?"active":""}`,onClick:()=>n("beneficiaries"),children:[e.jsx(y,{size:18})," Beneficiaries"]}),e.jsxs("button",{className:`tab-item ${r==="overrides"?"active":""}`,onClick:()=>n("overrides"),children:[e.jsx(d,{size:18})," Class Amounts"]}),e.jsxs("button",{className:`tab-item ${r==="activity"?"active":""}`,onClick:()=>n("activity"),children:[e.jsx(v,{size:18})," Transactions"]}),e.jsxs("button",{className:`tab-item ${r==="settings"?"active":""}`,onClick:()=>n("settings"),children:[e.jsx(F,{size:18})," Settings"]})]})]}),e.jsxs("div",{className:"profile-content",children:[r==="details"&&e.jsxs("div",{className:"content-card",children:[e.jsxs("div",{className:"card-header",children:[e.jsx("h3",{children:"Fee Overview"}),e.jsx("p",{children:"Manage fee configuration and pricing."})]}),e.jsxs("form",{onSubmit:w,className:"profile-form",children:[e.jsxs("div",{className:"form-grid",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Fee Title"}),e.jsx("input",{type:"text",value:a.title,onChange:t=>i("title",t.target.value),className:l.title?"error":""}),l.title&&e.jsx("span",{className:"error-msg",children:l.title})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Revenue Code"}),e.jsx("input",{type:"text",value:a.revenue_code,onChange:t=>i("revenue_code",t.target.value),className:l.revenue_code?"error":""})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Default Amount (₦)"}),e.jsx("input",{type:"number",value:a.amount,onChange:t=>i("amount",t.target.value),className:l.amount?"error":""}),e.jsx("small",{style:{color:"#666",fontSize:"0.85em",display:"block",marginTop:"4px"},children:"Used when term-specific amounts are not set"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"1st Term Amount (₦)"}),e.jsx("input",{type:"number",value:a.first_term_amount,onChange:t=>i("first_term_amount",t.target.value),placeholder:"Leave blank to use default",className:l.first_term_amount?"error":""})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"2nd Term Amount (₦)"}),e.jsx("input",{type:"number",value:a.second_term_amount,onChange:t=>i("second_term_amount",t.target.value),placeholder:"Leave blank to use default",className:l.second_term_amount?"error":""})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"3rd Term Amount (₦)"}),e.jsx("input",{type:"number",value:a.third_term_amount,onChange:t=>i("third_term_amount",t.target.value),placeholder:"Leave blank to use default",className:l.third_term_amount?"error":""})]}),e.jsxs("div",{className:"form-group",style:{marginTop:"10px"},children:[e.jsx("label",{style:{marginBottom:"10px",display:"block",fontWeight:"600"},children:"Term Activation"}),e.jsxs("div",{style:{display:"flex",gap:"20px",flexWrap:"wrap"},children:[e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",checked:a.first_term_active,onChange:t=>i("first_term_active",t.target.checked),style:{width:"18px",height:"18px",cursor:"pointer"}}),e.jsx("span",{children:"1st Term"})]}),e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",checked:a.second_term_active,onChange:t=>i("second_term_active",t.target.checked),style:{width:"18px",height:"18px",cursor:"pointer"}}),e.jsx("span",{children:"2nd Term"})]}),e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer"},children:[e.jsx("input",{type:"checkbox",checked:a.third_term_active,onChange:t=>i("third_term_active",t.target.checked),style:{width:"18px",height:"18px",cursor:"pointer"}}),e.jsx("span",{children:"3rd Term"})]})]}),e.jsx("small",{style:{color:"#666",fontSize:"0.85em",display:"block",marginTop:"6px"},children:"Select which terms this fee should be included in payment schedules"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Cycle"}),e.jsxs("select",{value:a.cycle,onChange:t=>i("cycle",t.target.value),children:[e.jsx("option",{value:"termly",children:"Termly"}),e.jsx("option",{value:"annually",children:"Annually"}),e.jsx("option",{value:"one-time",children:"One-time"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Type"}),e.jsxs("select",{value:a.type,onChange:t=>i("type",t.target.value),children:[e.jsx("option",{value:"compulsory",children:"Compulsory"}),e.jsx("option",{value:"optional",children:"Optional"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Payee Allowed"}),e.jsxs("select",{value:a.payee_allowed,onChange:t=>i("payee_allowed",t.target.value),children:[e.jsx("option",{value:"students",children:"Students"}),e.jsx("option",{value:"all",children:"All"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Charge Bearer"}),e.jsxs("select",{value:a.charge_bearer,onChange:t=>i("charge_bearer",t.target.value),children:[e.jsx("option",{value:"self",children:"Self"}),e.jsx("option",{value:"institution",children:"Institution"})]})]})]}),e.jsx("div",{className:"form-actions",children:e.jsxs("button",{type:"submit",className:"btn-save",disabled:u,children:[e.jsx(O,{size:18}),u?"Saving...":"Save Changes"]})})]})]}),r==="beneficiaries"&&e.jsxs("div",{className:"content-card",children:[e.jsxs("div",{className:"card-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsx("h3",{children:"Split Beneficiaries"}),e.jsx("p",{children:"Configure how revenue is distributed."})]}),e.jsxs("button",{className:"secondary-btn",onClick:()=>h(!0),children:[e.jsx(g,{size:16,style:{marginRight:"6px"}})," Manage Splits"]})]}),s.beneficiaries&&s.beneficiaries.length>0?e.jsx("div",{className:"accounts-list",children:s.beneficiaries.map((t,o)=>e.jsxs("div",{className:"account-item",children:[e.jsxs("div",{className:"bank-logo",style:{fontSize:"0.8rem",width:"40px",height:"40px"},children:[t.percentage,"%"]}),e.jsxs("div",{className:"account-details",children:[e.jsxs("h4",{children:[t.account_name," (",t.account_number,")"]}),e.jsx("div",{className:"account-number-row",children:e.jsx("span",{className:"acc-name",children:t.bank_name})})]})]},o))}):e.jsxs("div",{className:"empty-state",children:[e.jsx(y,{size:48,className:"text-gray-300"}),e.jsx("p",{children:"No beneficiaries configured. Fee goes 100% to main account."})]})]}),r==="overrides"&&e.jsxs("div",{className:"content-card",children:[e.jsxs("div",{className:"card-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsx("h3",{children:"Class Specific Amounts"}),e.jsx("p",{children:"Set unique payment amounts for different classes."})]}),e.jsxs("button",{className:"secondary-btn",onClick:()=>x(!0),children:[e.jsx(g,{size:16,style:{marginRight:"6px"}})," Manage Overrides"]})]}),s.overrides&&s.overrides.length>0?e.jsxs("table",{className:"modern-table",style:{width:"100%",marginTop:"20px"},children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Class"}),e.jsx("th",{children:"Amount (₦)"}),e.jsx("th",{children:"Status"})]})}),e.jsx("tbody",{children:s.overrides.map((t,o)=>{const p=m.find(A=>A.id===t.class_id);return e.jsxs("tr",{children:[e.jsx("td",{children:t.class_name||(p?p.name:"Unknown Class")}),e.jsxs("td",{children:["₦",E(t.amount)]}),e.jsx("td",{children:e.jsx("span",{className:`status-pill ${t.status}`,children:t.status})})]},o)})})]}):e.jsxs("div",{className:"empty-state",children:[e.jsx(d,{size:48,className:"text-gray-300"}),e.jsxs("p",{children:["No class overrides set. All classes pay the default amount (₦",s.raw_amount.toLocaleString(),")."]})]})]}),r==="activity"&&e.jsxs("div",{className:"content-card",children:[e.jsxs("div",{className:"card-header",children:[e.jsx("h3",{children:"Transactions"}),e.jsx("p",{children:"Recent payments for this fee."})]}),e.jsxs("div",{className:"empty-state",children:[e.jsx(v,{size:48,className:"text-gray-300"}),e.jsx("p",{children:"No transactions found."})]})]}),r==="settings"&&e.jsxs("div",{className:"content-card",children:[e.jsxs("div",{className:"card-header",children:[e.jsx("h3",{children:"Actions"}),e.jsx("p",{children:"Manage fee status and existence."})]}),e.jsxs("div",{className:"danger-actions",style:{borderBottom:"1px solid #eee",paddingBottom:"20px",marginBottom:"20px"},children:[e.jsx("h4",{style:{fontSize:"1rem",marginBottom:"8px",color:"#444"},children:"Fee Status"}),e.jsxs("p",{className:"warning-text",style:{color:"#666",marginBottom:"12px"},children:["Currently ",e.jsx("strong",{children:s.status}),". ",s.status==="Active"?"Deactivating will prevent new payments.":"Activating will allow payments."]}),e.jsxs("button",{className:"secondary-btn",onClick:S,style:{borderColor:"#ccc"},children:[e.jsx(H,{size:18,style:{marginRight:"8px"}}),s.status==="Active"?"Deactivate Fee":"Activate Fee"]})]}),e.jsxs("div",{className:"danger-actions",children:[e.jsx("h4",{style:{fontSize:"1rem",marginBottom:"8px",color:"#d32f2f"},children:"Delete Fee"}),e.jsx("p",{className:"warning-text",children:"Once deleted, this action cannot be undone."}),e.jsxs("button",{className:"btn-delete",onClick:k,children:[e.jsx(R,{size:18})," Delete Fee"]})]})]})]}),b&&e.jsx(B,{fee:{...s,id:s.id},onClose:()=>h(!1),bankAccounts:_}),N&&e.jsx($,{fee:s,classes:m,onClose:()=>x(!1)})]})]})};export{ie as default};
