import{u as g,r as l,b as A,j as e,H as S,a as y}from"./app-9_oLEb-g.js";import{X as B,L as C}from"./Layout-CVgtbi8l.js";import{I as E}from"./info-CZUDYDkN.js";import{T as V}from"./trash-2-e8QC6qro.js";import"./createLucideIcon-D3VZeyuY.js";const D=({isOpen:o,onClose:c,banks:i=[]})=>{if(!o)return null;const{data:s,setData:t,post:n,processing:d,reset:v,errors:I}=g({bank_name:"",bank_code:"",account_number:"",account_name:"",type:"Sub Account"}),[b,x]=l.useState(!1),[r,u]=l.useState(null),[j,m]=l.useState(null);l.useEffect(()=>{s.bank_code&&s.account_number.length===10?f():(u(null),m(null))},[s.bank_code,s.account_number]);const f=async()=>{x(!0),m(null);try{const a=await A.post("/business/bank-accounts/validate",{bank_code:s.bank_code,account_number:s.account_number});a.data.status?(u(a.data.account_name),t("account_name",a.data.account_name)):(u(null),m("Could not resolve account details."))}catch{u(null),m("Validation failed. Please check details.")}finally{x(!1)}},k=a=>{a.preventDefault(),r&&n("/business/bank-accounts",{onSuccess:()=>{v(),c()}})},_=a=>{const p=a.target.value,N=i.find(h=>h.name===p);t(h=>({...h,bank_name:p,bank_code:N?N.code:""}))};return e.jsx("div",{className:"modal-overlay",onClick:c,children:e.jsxs("div",{className:"modal-content",onClick:a=>a.stopPropagation(),children:[e.jsx("div",{className:"modal-close-container",children:e.jsx("button",{className:"modal-close-btn",onClick:c,children:e.jsx(B,{size:20,color:"#EF4444"})})}),e.jsxs("div",{className:"modal-body",children:[e.jsx("h2",{className:"modal-title",children:"Add Sub Account"}),e.jsxs("form",{onSubmit:k,children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Bank"}),e.jsxs("select",{className:"form-select",value:s.bank_name,onChange:_,children:[e.jsx("option",{value:"",children:"Select Bank"}),i.map(a=>e.jsx("option",{value:a.name,children:a.name},a.code))]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Account Number"}),e.jsx("input",{type:"text",className:"form-input",value:s.account_number,onChange:a=>t("account_number",a.target.value),placeholder:"10 digit bank account number",maxLength:10})]}),b&&e.jsx("div",{className:"validation-status validating",children:"Validating account details..."}),r&&e.jsxs("div",{className:"validation-success",children:[e.jsx("div",{className:"success-icon",children:e.jsx(E,{size:18,color:"white",fill:"#10B981"})}),e.jsx("span",{className:"account-name",children:r})]}),j&&e.jsx("div",{className:"validation-error",children:j}),e.jsx("button",{type:"submit",className:"save-btn",disabled:!r||d||b,children:d?"Saving...":"Save"})]})]})]})})},O=({accounts:o=[],banks:c=[]})=>{const[i,s]=l.useState(!1),t=n=>{confirm("Are you sure you want to delete this bank account?")&&y.delete(`/business/bank-accounts/${n}`)};return e.jsxs(C,{children:[e.jsx(S,{title:"Bank Accounts"}),e.jsxs("div",{className:"bank-accounts-page",children:[e.jsxs("div",{className:"page-header",children:[e.jsx("h1",{className:"page-title",children:"Bank Accounts"}),e.jsx("button",{className:"add-account-btn",onClick:()=>s(!0),children:"+ Add Sub Account"})]}),e.jsxs("div",{className:"accounts-table-container card",children:[e.jsxs("table",{className:"accounts-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"S/N"}),e.jsx("th",{children:"Sub Account Code"}),e.jsx("th",{children:"Bank Name"}),e.jsx("th",{children:"Account Name"}),e.jsx("th",{children:"Account Number"}),e.jsx("th",{children:"Type"}),e.jsx("th",{className:"actions-col",children:"Actions"})]})}),e.jsxs("tbody",{children:[o.map((n,d)=>e.jsxs("tr",{children:[e.jsx("td",{children:d+1}),e.jsx("td",{children:n.sub_account_code||"-"}),e.jsx("td",{children:n.bank_name}),e.jsx("td",{children:n.account_name}),e.jsx("td",{children:n.account_number}),e.jsx("td",{children:n.sub_account_code?"Sub Account":"Primary Account"}),e.jsx("td",{className:"actions-cell",children:e.jsx("button",{className:"delete-btn",onClick:()=>t(n.id),title:"Delete Account",children:e.jsx(V,{size:18})})})]},n.id)),o.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:"7",className:"empty-state",children:"No bank accounts found."})})]})]}),e.jsxs("div",{className:"table-pagination",children:[e.jsx("button",{className:"page-nav-btn disabled",children:"« Previous"}),e.jsx("div",{className:"page-numbers",children:e.jsx("button",{className:"page-num-btn active",children:"1"})}),e.jsx("button",{className:"page-nav-btn disabled",children:"Next »"})]})]}),e.jsx(D,{isOpen:i,onClose:()=>s(!1),banks:c})]})]})};export{O as default};
