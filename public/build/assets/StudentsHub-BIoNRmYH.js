const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/app-13HG_1GY.js","assets/app-_xkRgTL5.css"])))=>i.map(i=>d[i]);
import{u as D,j as e,r as j,R as W,d as X,H as B,_ as L,L as I}from"./app-13HG_1GY.js";import{X as w,L as O,S as U,C as Y}from"./Layout-DRo6Tvgr.js";/* empty css                       */import{C as J}from"./circle-alert-CnL9XqZw.js";import{U as K}from"./upload-DsI242zE.js";import{c as M}from"./createLucideIcon-DZqVtFvv.js";import{P as Q}from"./pen-wwfLMC5z.js";import{T}from"./trash-2-C5-eo-9B.js";import{D as Z}from"./download-BW_srdOr.js";import{E as ee}from"./ellipsis-vertical-B_NI8KzB.js";import{S as se}from"./square-pen-CGhneDh0.js";import{W as ae}from"./wallet-CEtQtsoX.js";const le=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],ne=M("check",le);const ie=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],te=M("external-link",ie);const re=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],$=M("user-plus",re),ce=({show:N,onClose:r,selectedStudentIds:l=[],classes:m=[]})=>{if(!N)return null;const{data:x,setData:c,post:o,processing:d,errors:v}=D({student_ids:l,target_class_id:"",target_session_id:"",retain_debt:!0}),t=l.length>1,n=u=>{u.preventDefault(),o("/students/promote",{onSuccess:()=>{r()}})};return e.jsx("div",{className:"modal-overlay",onClick:r,children:e.jsxs("div",{className:"modal-content promotion-modal",onClick:u=>u.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("div",{className:"header-title",children:[e.jsx("h3",{children:"Promote Students"}),e.jsxs("p",{children:["Move ",l.length," selected student",t?"s":""," to a new class"]})]}),e.jsx("button",{className:"close-btn",onClick:r,children:e.jsx(w,{size:20})})]}),e.jsxs("div",{className:"warning-banner",children:[e.jsx(J,{size:18}),e.jsx("span",{children:"This action will update the class for all selected students."})]}),e.jsxs("form",{onSubmit:n,className:"promotion-form",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Target Class"}),e.jsxs("select",{value:x.target_class_id,onChange:u=>c("target_class_id",u.target.value),required:!0,children:[e.jsx("option",{value:"",children:"Select Class"}),m.map(u=>e.jsx("option",{value:u.id,children:u.name},u.id))]}),v.target_class_id&&e.jsx("span",{className:"error-msg",children:v.target_class_id})]}),e.jsxs("div",{className:"form-footer-actions",children:[e.jsx("button",{type:"button",className:"btn-cancel",onClick:r,children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn-promote",disabled:d,children:d?"Promoting...":"Promote Students"})]})]})]})})},oe=({show:N,onClose:r,classes:l=[],subClasses:m=[]})=>{if(!N)return null;const[x,c]=j.useState("single"),{data:o,setData:d,post:v,processing:t,errors:n,reset:u}=D({name:"",gender:"",class_id:"",sub_class_id:"",auto_reg:!1,admission_number:"",phone:"",email:""}),{data:f,setData:i,post:C,processing:y,errors:g,reset:k}=D({file:null,class_id:"",sub_class_id:""}),p=m,b=a=>{a.preventDefault(),v("/students",{onSuccess:()=>{u(),r()}})},P=a=>{a.preventDefault(),C("/students/import",{onSuccess:()=>{k(),r()},forceFormData:!0})},E=a=>{i("file",a.target.files[0])};return e.jsx("div",{className:"modal-overlay",onClick:r,children:e.jsxs("div",{className:"modal-content add-student-modal",onClick:a=>a.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("div",{className:"header-title",children:e.jsx("h3",{children:"Add Student"})}),e.jsx("button",{className:"close-btn",onClick:r,children:e.jsx(w,{size:20})})]}),e.jsxs("div",{className:"modal-tabs",children:[e.jsx("button",{className:`tab-btn ${x==="single"?"active":""}`,onClick:()=>c("single"),children:"Single Student"}),e.jsx("button",{className:`tab-btn ${x==="multiple"?"active":""}`,onClick:()=>c("multiple"),children:"Multiple Students (CSV)"})]}),x==="single"?e.jsxs("form",{onSubmit:b,className:"student-form",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Full Name"}),e.jsx("input",{type:"text",placeholder:"Student full name",value:o.name,onChange:a=>d("name",a.target.value),className:n.name?"error-input":""}),n.name&&e.jsx("span",{className:"error-msg",children:n.name})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Gender"}),e.jsx("input",{type:"text",placeholder:"Gender",value:o.gender,onChange:a=>d("gender",a.target.value),className:(n.gender,"hidden")}),e.jsxs("select",{value:o.gender,onChange:a=>d("gender",a.target.value),className:n.gender?"error-input":"",children:[e.jsx("option",{value:"",children:"Gender"}),e.jsx("option",{value:"Male",children:"Male"}),e.jsx("option",{value:"Female",children:"Female"})]}),n.gender&&e.jsx("span",{className:"error-msg",children:n.gender})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Class"}),e.jsxs("select",{value:o.class_id,onChange:a=>d("class_id",a.target.value),className:n.class_id?"error-input":"",children:[e.jsx("option",{value:"",children:"--Select class--"}),l.map(a=>e.jsx("option",{value:a.id,children:a.name},a.id))]}),n.class_id&&e.jsx("span",{className:"error-msg",children:n.class_id})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Subclass"}),e.jsxs("select",{value:o.sub_class_id,onChange:a=>d("sub_class_id",a.target.value),className:n.sub_class_id?"error-input":"",children:[e.jsx("option",{value:"",children:"Select Subclass"}),p.map(a=>e.jsx("option",{value:a.id,children:a.name},a.id))]}),n.sub_class_id&&e.jsx("span",{className:"error-msg",children:n.sub_class_id})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Phone Number"}),e.jsx("input",{type:"text",placeholder:"Student or Parent phone",value:o.phone,onChange:a=>d("phone",a.target.value),className:n.phone?"error-input":""}),n.phone&&e.jsx("span",{className:"error-msg",children:n.phone})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Email Address"}),e.jsx("input",{type:"email",placeholder:"For virtual account generation",value:o.email,onChange:a=>d("email",a.target.value),className:n.email?"error-input":""}),n.email&&e.jsx("span",{className:"error-msg",children:n.email})]}),e.jsx("div",{className:"form-checkbox-group",children:e.jsxs("label",{className:"checkbox-container",children:[e.jsx("input",{type:"checkbox",checked:o.auto_reg,onChange:a=>d("auto_reg",a.target.checked)}),e.jsx("span",{className:"checkmark"}),"Auto generate reg number ?"]})}),!o.auto_reg&&e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Reg Number"}),e.jsx("input",{type:"text",placeholder:"Enter Reg Number",value:o.admission_number,onChange:a=>d("admission_number",a.target.value),className:n.admission_number?"error-input":""}),n.admission_number&&e.jsx("span",{className:"error-msg",children:n.admission_number})]}),e.jsx("button",{type:"submit",className:"btn-promote full-width mt-6",disabled:t,children:t?"Saving...":"Save"})]}):e.jsxs("form",{onSubmit:P,className:"student-form",children:[e.jsxs("div",{className:"download-template-area",children:[e.jsx("a",{href:"/students/template",target:"_blank",className:"download-link",children:"Download Sample File Here. Do not change the headers !"}),"                        "]}),e.jsxs("div",{className:"file-upload-area",children:[e.jsx("input",{type:"file",id:"csv-upload-tab",accept:".csv",onChange:E,className:"hidden-file-input"}),e.jsxs("label",{htmlFor:"csv-upload-tab",className:"upload-label",children:[e.jsx("div",{className:"upload-icon-wrapper",children:e.jsx(K,{size:32})}),e.jsxs("span",{className:"upload-text",children:["Drop your students file here or ",e.jsx("span",{className:"highlight-text",children:"Browse"})]}),e.jsx("span",{className:"upload-subtext",children:"Supports: CSV, XLS, XLSX"}),f.file&&e.jsx("div",{className:"file-name-tag",children:f.file.name})]}),g.file&&e.jsx("div",{className:"error-msg mt-2",children:g.file})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Class"}),e.jsxs("select",{value:f.class_id,onChange:a=>i("class_id",a.target.value),className:g.class_id?"error-input":"",children:[e.jsx("option",{value:"",children:"--Select class--"}),l.map(a=>e.jsx("option",{value:a.id,children:a.name},a.id))]}),g.class_id&&e.jsx("span",{className:"error-msg",children:g.class_id})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Subclass"}),e.jsxs("select",{value:f.sub_class_id,onChange:a=>i("sub_class_id",a.target.value),className:g.sub_class_id?"error-input":"",children:[e.jsx("option",{value:"",children:"Select Subclass"}),p.map(a=>e.jsx("option",{value:a.id,children:a.name},a.id))]}),g.sub_class_id&&e.jsx("span",{className:"error-msg",children:g.sub_class_id})]}),e.jsx("button",{type:"submit",className:"btn-promote full-width",disabled:y||!f.file,children:y?"Saving...":"Save"})]})]})})},de=({show:N,onClose:r,onExport:l,hasActiveFilters:m})=>{if(!N)return null;const[x,c]=j.useState(m?"filtered":"all"),o=()=>{l(x),r()};return e.jsx("div",{className:"modal-overlay",onClick:r,children:e.jsxs("div",{className:"modal-content promotion-modal",onClick:d=>d.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("div",{className:"header-title",children:[e.jsx("h3",{children:"Export student records"}),e.jsx("p",{children:"Which records do you want to export?"})]}),e.jsx("button",{className:"close-btn",onClick:r,children:e.jsx(w,{size:20})})]}),e.jsxs("div",{className:"promotion-form",children:[e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"radio-option",children:[e.jsx("input",{type:"radio",name:"exportType",value:"filtered",checked:x==="filtered",onChange:()=>c("filtered"),disabled:!m}),e.jsx("div",{className:"radio-content",children:e.jsx("span",{className:`radio-label ${m?"":"disabled"}`,children:"With current filters"})})]}),e.jsxs("label",{className:"radio-option mt-4",children:[e.jsx("input",{type:"radio",name:"exportType",value:"all",checked:x==="all",onChange:()=>c("all")}),e.jsx("div",{className:"radio-content",children:e.jsx("span",{className:"radio-label",children:"All student records"})})]})]}),e.jsx("div",{className:"form-footer-actions",children:e.jsx("button",{type:"button",className:"btn-promote full-width",onClick:o,children:"Export"})})]})]})})},me=({show:N,onClose:r,student:l,classes:m=[],subClasses:x=[]})=>{if(!N||!l)return null;const{data:c,setData:o,put:d,processing:v,errors:t,reset:n}=D({name:"",gender:"",class_id:"",sub_class_id:"",phone:"",email:""});j.useEffect(()=>{l&&o({name:l.name||"",gender:l.gender||"",class_id:l.class_id||"",sub_class_id:l.sub_class_id||"",phone:l.phone||"",email:l.email||""})},[l]);const u=x,f=i=>{i.preventDefault(),d(`/students/${l.id}`,{onSuccess:()=>{r(),n()}})};return e.jsx("div",{className:"modal-overlay",onClick:r,children:e.jsxs("div",{className:"modal-content add-student-modal",onClick:i=>i.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("div",{className:"header-title",children:e.jsx("h3",{children:"Edit Student"})}),e.jsx("button",{className:"close-btn",onClick:r,children:e.jsx(w,{size:20})})]}),e.jsxs("form",{onSubmit:f,className:"student-form",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Full Name"}),e.jsx("input",{type:"text",placeholder:"Student full name",value:c.name,onChange:i=>o("name",i.target.value),className:t.name?"error-input":""}),t.name&&e.jsx("span",{className:"error-msg",children:t.name})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Gender"}),e.jsxs("select",{value:c.gender,onChange:i=>o("gender",i.target.value),className:t.gender?"error-input":"",children:[e.jsx("option",{value:"",children:"Gender"}),e.jsx("option",{value:"Male",children:"Male"}),e.jsx("option",{value:"Female",children:"Female"})]}),t.gender&&e.jsx("span",{className:"error-msg",children:t.gender})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Class"}),e.jsxs("select",{value:c.class_id,onChange:i=>{o(C=>({...C,class_id:i.target.value,sub_class_id:""}))},className:t.class_id?"error-input":"",children:[e.jsx("option",{value:"",children:"--Select class--"}),m.map(i=>e.jsx("option",{value:i.id,children:i.name},i.id))]}),t.class_id&&e.jsx("span",{className:"error-msg",children:t.class_id})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Subclass"}),e.jsxs("select",{value:c.sub_class_id,onChange:i=>o("sub_class_id",i.target.value),className:t.sub_class_id?"error-input":"",children:[e.jsx("option",{value:"",children:"Select Subclass"}),u.map(i=>e.jsx("option",{value:i.id,children:i.name},i.id))]}),t.sub_class_id&&e.jsx("span",{className:"error-msg",children:t.sub_class_id})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Phone Number"}),e.jsx("input",{type:"text",placeholder:"Student or Parent phone",value:c.phone,onChange:i=>o("phone",i.target.value),className:t.phone?"error-input":""}),t.phone&&e.jsx("span",{className:"error-msg",children:t.phone})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Email Address"}),e.jsx("input",{type:"email",placeholder:"For virtual account generation",value:c.email,onChange:i=>o("email",i.target.value),className:t.email?"error-input":""}),t.email&&e.jsx("span",{className:"error-msg",children:t.email})]}),e.jsx("div",{className:"modal-footer-actions mt-6",children:e.jsx("button",{type:"submit",className:"btn-promote full-width",disabled:v,children:v?"Saving Changes...":"Save Changes"})})]})]})})},he=({show:N,onClose:r,student:l})=>!N||!l?null:e.jsx("div",{className:"modal-overlay",onClick:r,children:e.jsxs("div",{className:"modal-content student-details-modal",onClick:m=>m.stopPropagation(),children:[e.jsx("div",{className:"modal-header no-border",children:e.jsx("button",{className:"close-btn",onClick:r,children:e.jsx(w,{size:20})})}),e.jsxs("div",{className:"details-scroll-content",children:[e.jsxs("div",{className:"profile-header-section",children:[e.jsxs("div",{className:"profile-avatar-wrapper",children:[e.jsx("div",{className:"large-avatar",children:l.name.charAt(0)}),e.jsx("div",{className:"verify-badge",children:e.jsx(ne,{size:12,color:"white"})})]}),e.jsxs("div",{className:"profile-identity",children:[e.jsx("h3",{children:l.name}),e.jsx("span",{className:"reg-no",children:l.admission_number||"No Reg No"})]})]}),e.jsxs("div",{className:"info-grid-section",children:[e.jsxs("div",{className:"info-row",children:[e.jsx("span",{className:"info-label",children:"Gender"}),e.jsx("span",{className:"info-value",children:l.gender}),e.jsx("span",{className:"info-label",children:"Class"}),e.jsx("span",{className:"info-value",children:l.class_name})]}),e.jsxs("div",{className:"info-row",children:[e.jsx("span",{className:"info-label",children:"Email"}),e.jsx("span",{className:"info-value full-width",children:l.email||"N/A"})]}),e.jsxs("div",{className:"info-row",children:[e.jsx("span",{className:"info-label",children:"Phone"}),e.jsx("span",{className:"info-value full-width",children:l.phone||"N/A"})]}),e.jsxs("div",{className:"info-row",children:[e.jsx("span",{className:"info-label",children:"School Name:"}),e.jsx("span",{className:"info-value full-width",children:l.school_name})]}),e.jsxs("div",{className:"info-row",children:[e.jsx("span",{className:"info-label",children:"Added On"}),e.jsx("span",{className:"info-value full-width",children:l.added_on})]}),e.jsxs("div",{className:"info-row",children:[e.jsx("span",{className:"info-label",children:"Session Added"}),e.jsx("span",{className:"info-value full-width",children:l.session_added})]})]}),e.jsxs("div",{className:"detail-section",children:[e.jsxs("div",{className:"section-header",children:[e.jsx("h4",{children:"Academic History"}),e.jsx("button",{className:"edit-icon-btn",children:e.jsx(Q,{size:12})})]}),e.jsx("div",{className:"history-cards",children:l.academic_history&&l.academic_history.length>0?l.academic_history.map((m,x)=>e.jsxs("div",{className:"history-card",children:[e.jsxs("div",{className:"history-title",children:["Class: ",m.class]}),e.jsxs("div",{className:"history-session",children:["Session ",m.session]})]},x)):e.jsxs("div",{className:"history-card",children:[e.jsx("div",{className:"history-title",children:"Current Class"}),e.jsx("div",{className:"history-session",children:l.class_name})]})})]}),e.jsxs("div",{className:"detail-section",children:[e.jsx("h4",{children:"Account Numbers"}),e.jsx("div",{className:"accounts-list",children:l.account_numbers&&l.account_numbers.length>0?l.account_numbers.map((m,x)=>e.jsxs("div",{className:"account-card",children:[e.jsxs("div",{className:"acc-label",children:["Account ",x+1]}),e.jsxs("div",{className:"acc-row",children:["Account Number: ",e.jsx("span",{className:"acc-val",children:m.number})]}),e.jsxs("div",{className:"acc-row",children:["Account Name: ",e.jsx("span",{className:"acc-val",children:m.name})]}),e.jsxs("div",{className:"acc-row",children:["Account Bank: ",e.jsx("span",{className:"acc-val",children:m.bank})]})]},x)):e.jsx("div",{className:"account-card",children:e.jsx("div",{className:"acc-label",children:"No Account Assigned"})})})]})]})]})}),ye=({initialStudents:N=[],initialClasses:r=[],initialSubClasses:l=[]})=>{const[m,x]=j.useState(""),[c,o]=j.useState(""),[d,v]=j.useState(""),[t]=j.useState(N),[n,u]=j.useState([]),[f,i]=j.useState(!1),[C,y]=j.useState(!1),[g,k]=j.useState(!1),[p,b]=j.useState(null),[P,E]=j.useState(null),[a,z]=j.useState(null);W.useEffect(()=>{const s=h=>{p&&!h.target.closest(".student-action-menu")&&!h.target.closest(".actions-cell")&&b(null)};return document.addEventListener("mousedown",s),()=>document.removeEventListener("mousedown",s)},[p]);const F=l.filter(s=>!c||s.class_id==c||!s.class_id),S=t.filter(s=>{const h=s.name.toLowerCase().includes(m.toLowerCase())||s.admission_number.toLowerCase().includes(m.toLowerCase()),_=c?s.class_id==c:!0,A=d?s.sub_class_id==d:!0;return h&&_&&A}),R=s=>{switch(s?.toLowerCase()){case"paid":return"active";case"partial":return"partial";case"pending":return"inactive";default:return"inactive"}},V=s=>{s.target.checked?u(S.map(h=>h.id)):u([])},H=s=>{n.includes(s)?u(n.filter(h=>h!==s)):u([...n,s])},q=s=>{o(s.target.value),v("")},G=s=>{let h="/students/export";if(s==="filtered"){const _=new URLSearchParams;c&&_.append("class_id",c),d&&_.append("sub_class_id",d),h+=`?${_.toString()}`}window.location.href=h};return e.jsxs(e.Fragment,{children:[e.jsxs(O,{children:[e.jsx(B,{title:`Students - ${t.length}`}),e.jsxs("div",{className:"students-page-container",children:[e.jsxs("div",{className:"students-top-bar",children:[e.jsxs("h1",{className:"page-heading",children:["Students - ",e.jsx("span",{className:"count",children:t.length.toLocaleString()})]}),e.jsx("div",{className:"header-actions",children:n.length>0?e.jsxs("div",{style:{display:"flex",gap:"10px"},children:[e.jsxs("button",{className:"btn-promote-action",onClick:()=>{confirm(`Are you sure you want to delete ${n.length} students? This action cannot be undone.`)&&L(async()=>{const{router:s}=await import("./app-13HG_1GY.js").then(h=>h.i);return{router:s}},__vite__mapDeps([0,1])).then(({router:s})=>{s.delete("/students/bulk-delete",{data:{student_ids:n},onSuccess:()=>u([])})})},style:{background:"#ff4d4f",borderColor:"#ff4d4f"},children:[e.jsx(T,{size:18}),"Delete (",n.length,")"]}),e.jsxs("button",{className:"btn-promote-action",onClick:()=>i(!0),children:[e.jsx($,{size:18}),"Promote (",n.length,")"]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("button",{className:"import-btn-outline",onClick:()=>y(!0),children:[e.jsx($,{size:18}),"+ Add Student"]}),e.jsxs("button",{className:"export-btn-primary",onClick:()=>k(!0),children:[e.jsx(Z,{size:18}),"Export"]})]})})]}),e.jsxs("div",{className:"students-table-card card",children:[e.jsxs("div",{className:"table-filters-row",children:[e.jsx("div",{className:"filter-group",children:e.jsxs("select",{value:c,onChange:q,className:"filter-select",children:[e.jsx("option",{value:"",children:"Filter by class"}),r.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]})}),e.jsx("div",{className:"filter-group",children:e.jsxs("select",{value:d,onChange:s=>v(s.target.value),className:"filter-select",disabled:!c&&F.length>10,children:[e.jsx("option",{value:"",children:"Filter by subclass"}),F.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]})}),e.jsxs("div",{className:"search-wrapper",children:[e.jsx(U,{size:18,className:"search-icon"}),e.jsx("input",{type:"text",placeholder:"Search by name or reg number",value:m,onChange:s=>x(s.target.value)})]})]}),e.jsx("div",{className:"table-scroll-area",children:e.jsxs("table",{className:"students-data-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"checkbox-col",children:e.jsx("input",{type:"checkbox",onChange:V,checked:S.length>0&&n.length===S.length})}),e.jsx("th",{children:"S/N"}),e.jsx("th",{children:"Payer"}),e.jsx("th",{children:"Reg Number"}),e.jsx("th",{children:"Class"}),e.jsx("th",{children:"Phone"}),e.jsx("th",{className:"status-col",children:"Status"}),e.jsx("th",{className:"actions-col"})]})}),e.jsxs("tbody",{children:[S.map((s,h)=>e.jsxs("tr",{className:n.includes(s.id)?"selected-row":"",children:[e.jsx("td",{className:"checkbox-col",children:e.jsx("input",{type:"checkbox",onChange:()=>H(s.id),checked:n.includes(s.id)})}),e.jsx("td",{children:h+1}),e.jsx("td",{className:"payer-cell",children:e.jsxs("div",{className:"payer-info",children:[e.jsx("div",{className:"avatar-placeholder",children:s.name.charAt(0)}),e.jsx(I,{href:`/students/${s.id}`,className:"payer-name hover:text-pink-600 hover:underline",children:s.name})]})}),e.jsx("td",{children:s.admission_number}),e.jsxs("td",{children:[s.class_name," (",s.sub_class_name,")"]}),e.jsx("td",{children:s.phone}),e.jsx("td",{children:e.jsxs("span",{className:`status-pill ${R(s.payment_status)}`,children:[e.jsx("span",{className:"pill-dot"}),s.payment_status]})}),e.jsx("td",{className:"actions-cell",children:e.jsx("button",{className:"row-toggle-btn",onClick:_=>{_.stopPropagation();const A=_.currentTarget.getBoundingClientRect();p?.id===s.id?b(null):b({id:s.id,top:A.bottom+window.scrollY+5,left:A.left+window.scrollX-140})},children:e.jsx(ee,{size:16})})})]},s.id)),S.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:"8",className:"no-records",children:"No students found."})})]})]})}),e.jsxs("div",{className:"table-footer-pagination",children:[e.jsx("button",{className:"nav-page-btn disabled",children:"« Previous"}),e.jsx("div",{className:"center-page-num",children:e.jsx("span",{className:"page-box active",children:"1"})}),e.jsx("button",{className:"nav-page-btn disabled",children:"Next »"})]})]})]}),e.jsx(ce,{show:f,onClose:()=>i(!1),selectedStudentIds:n,classes:r}),e.jsx(oe,{show:C,onClose:()=>y(!1),classes:r,subClasses:l}),e.jsx(de,{show:g,onClose:()=>k(!1),onExport:G,hasActiveFilters:!!c||!!d}),e.jsx(me,{show:!!P,onClose:()=>E(null),student:P,classes:r,subClasses:l}),e.jsx(he,{show:!!a,onClose:()=>z(null),student:a})]}),p&&X.createPortal(e.jsxs("div",{className:"student-action-menu fixed-menu",style:{top:`${p.top}px`,left:`${p.left}px`,position:"fixed",margin:0,zIndex:9999},onClick:s=>s.stopPropagation(),children:[e.jsxs("button",{className:"action-item",onClick:()=>{const s=S.find(h=>h.id===p.id);E(s),b(null)},children:[e.jsx(se,{size:14}),"Edit"]}),e.jsxs("button",{className:"action-item",onClick:()=>{const s=S.find(h=>h.id===p.id);z(s),b(null)},children:[e.jsx(te,{size:14}),"View Details"]}),e.jsxs("button",{className:"action-item delete",onClick:()=>{confirm("Are you sure you want to delete this student profile?")&&L(async()=>{const{router:s}=await import("./app-13HG_1GY.js").then(h=>h.i);return{router:s}},__vite__mapDeps([0,1])).then(({router:s})=>{s.delete(`/students/${p.id}`,{onSuccess:()=>b(null)})})},children:[e.jsx(T,{size:14}),"Delete"]}),e.jsxs("button",{className:"action-item",onClick:()=>{console.log("Payment",p.id),b(null)},children:[e.jsx(Y,{size:14}),"Payment Activity"]}),e.jsxs("button",{className:"action-item",onClick:()=>{console.log("Wallet",p.id),b(null)},children:[e.jsx(ae,{size:14}),"Wallet"]})]}),document.body)]})};export{ye as default};
