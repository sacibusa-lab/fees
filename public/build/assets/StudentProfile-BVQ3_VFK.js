import{r as N,u as b,j as e,H as f,L as g,a as o}from"./app-DJwn5cZd.js";import{L as y,a as _,C as d,S}from"./Layout-CDf_Bp-_.js";import{A,a as m}from"./StudentProfile-tx0QImcG.js";import{S as C}from"./save-DMLhsmcw.js";import{T as k}from"./trash-2-C7YtBF4a.js";import"./createLucideIcon-hZdVIOjM.js";const T=({student:a,classes:h,subClasses:u})=>{const[i,l]=N.useState("profile"),{data:n,setData:c,put:x,processing:t,errors:r}=b({name:a.name,gender:a.gender,class_id:a.class_id,sub_class_id:a.sub_class_id}),j=s=>{s.preventDefault(),x(`/students/${a.id}`,{preserveScroll:!0,onSuccess:()=>alert("Student updated successfully!")})},p=()=>{confirm("Are you sure you want to delete this student? This action cannot be undone.")&&o.delete(`/students/${a.id}`,{onSuccess:()=>alert("Student profile deleted successfully")})};return e.jsxs(y,{children:[e.jsx(f,{title:`${a.name} - Profile`}),e.jsxs("div",{className:"student-profile-container",children:[e.jsxs("div",{className:"profile-header",children:[e.jsxs(g,{href:"/students",className:"back-link",children:[e.jsx(A,{size:20})," Back to Students"]}),e.jsxs("div",{className:"profile-summary",children:[e.jsx("div",{className:"profile-avatar-large",children:a.name.charAt(0)}),e.jsxs("div",{className:"profile-info-primary",children:[e.jsx("h1",{children:a.name}),e.jsxs("div",{className:"profile-meta",children:[e.jsx("span",{className:"meta-item",children:a.admission_number}),e.jsx("span",{className:"meta-dot",children:"•"}),e.jsxs("span",{className:"meta-item",children:[a.class_name," (",a.sub_class_name,")"]}),e.jsx("span",{className:"meta-dot",children:"•"}),e.jsx("span",{className:`status-pill ${a.payment_status}`,children:a.payment_status})]})]})]}),e.jsxs("div",{className:"profile-tabs",children:[e.jsxs("button",{className:`tab-item ${i==="profile"?"active":""}`,onClick:()=>l("profile"),children:[e.jsx(_,{size:18})," Profile Details"]}),e.jsxs("button",{className:`tab-item ${i==="accounts"?"active":""}`,onClick:()=>l("accounts"),children:[e.jsx(d,{size:18})," Virtual Accounts"]}),e.jsxs("button",{className:`tab-item ${i==="activity"?"active":""}`,onClick:()=>l("activity"),children:[e.jsx(m,{size:18})," Payment Activity"]}),e.jsxs("button",{className:`tab-item ${i==="settings"?"active":""}`,onClick:()=>l("settings"),children:[e.jsx(S,{size:18})," Settings"]})]})]}),e.jsxs("div",{className:"profile-content",children:[i==="profile"&&e.jsxs("div",{className:"content-card",children:[e.jsxs("div",{className:"card-header",children:[e.jsx("h3",{children:"Personal Information"}),e.jsx("p",{children:"View and update student details."})]}),e.jsxs("form",{onSubmit:j,className:"profile-form",children:[e.jsxs("div",{className:"form-grid",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Full Name"}),e.jsx("input",{type:"text",value:n.name,onChange:s=>c("name",s.target.value),className:r.name?"error":""}),r.name&&e.jsx("span",{className:"error-msg",children:r.name})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Gender"}),e.jsxs("select",{value:n.gender,onChange:s=>c("gender",s.target.value),children:[e.jsx("option",{value:"Male",children:"Male"}),e.jsx("option",{value:"Female",children:"Female"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Class"}),e.jsx("select",{value:n.class_id,onChange:s=>c("class_id",s.target.value),children:h.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Subclass"}),e.jsx("select",{value:n.sub_class_id,onChange:s=>c("sub_class_id",s.target.value),children:u.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Email Address"}),e.jsx("input",{type:"text",value:a.email||"N/A",disabled:!0,className:"disabled-input"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Student Phone"}),e.jsx("input",{type:"text",value:a.phone||"N/A",disabled:!0,className:"disabled-input"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Guardian Phone"}),e.jsx("input",{type:"text",value:a.guardian_phone||"N/A",disabled:!0,className:"disabled-input"})]})]}),e.jsx("div",{className:"form-actions",children:e.jsxs("button",{type:"submit",className:"btn-save",disabled:t,children:[e.jsx(C,{size:18}),t?"Saving...":"Save Changes"]})})]})]}),i==="accounts"&&e.jsxs("div",{className:"content-card",children:[e.jsxs("div",{className:"card-header flex-between",children:[e.jsxs("div",{children:[e.jsx("h3",{children:"Virtual Accounts"}),e.jsx("p",{children:"Dedicated accounts for student fee payments."})]}),!a.has_vaccount&&e.jsxs("button",{className:"btn-generate-va",onClick:()=>o.post(`/students/${a.id}/virtual-account`),disabled:t,children:[e.jsx(d,{size:18})," Generate Virtual Account"]})]}),e.jsx("div",{className:"accounts-list",children:a.account_numbers.length>0?a.account_numbers.map((s,v)=>e.jsxs("div",{className:`account-item ${s.is_dva?"dva-item":""}`,children:[e.jsx("div",{className:"bank-logo",children:s.bank.charAt(0)}),e.jsxs("div",{className:"account-details",children:[e.jsxs("div",{className:"account-header",children:[e.jsx("h4",{children:s.bank}),e.jsx("span",{className:`acc-pill ${s.is_dva?"dva":"regular"}`,children:s.is_dva?"Dedicated":"Regular"})]}),e.jsxs("div",{className:"account-number-row",children:[e.jsx("span",{className:"acc-num",children:s.number}),e.jsx("span",{className:"acc-name",children:s.name})]})]})]},v)):e.jsxs("div",{className:"empty-state",children:[e.jsx(d,{size:48}),e.jsx("p",{children:"No payment accounts associated with this student."})]})}),a.has_vaccount&&e.jsx("div",{className:"va-notice",children:e.jsx("p",{children:"Payments to this dedicated account are automatically verified and credited to the student."})})]}),i==="activity"&&e.jsxs("div",{className:"content-card",children:[e.jsxs("div",{className:"card-header",children:[e.jsx("h3",{children:"Payment Activity"}),e.jsx("p",{children:"Recent transactions and fee records."})]}),e.jsxs("div",{className:"empty-state",children:[e.jsx(m,{size:48}),e.jsx("p",{children:"No recent payment activity found."})]})]}),i==="settings"&&e.jsxs("div",{className:"content-card danger-zone",children:[e.jsxs("div",{className:"card-header",children:[e.jsx("h3",{children:"Delete Student"}),e.jsx("p",{children:"Permanently remove this student and all associated data."})]}),e.jsxs("div",{className:"danger-actions",children:[e.jsx("p",{className:"warning-text",children:"Once deleted, this action cannot be undone. Please be certain."}),e.jsxs("button",{className:"btn-delete",onClick:p,children:[e.jsx(k,{size:18})," Delete Student Profile"]})]})]})]})]})]})};export{T as default};
