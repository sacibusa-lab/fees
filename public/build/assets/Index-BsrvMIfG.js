import{r as l,j as e,H as S,a as m}from"./app-py5_dQwR.js";import{X as g,L as k}from"./Layout-Ch7LC_aF.js";import{c as x}from"./createLucideIcon-vPTwZ-GI.js";import{E as y}from"./ellipsis-vertical-CYOpwXWy.js";import{C as w}from"./circle-check-big-BM0iFkeD.js";const C=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],f=x("arrow-right",C);const A=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],T=x("circle-check",A),Y=({isOpen:i,onClose:t,currentTerm:n,onNext:o})=>{if(!i)return null;const[a,c]=l.useState("keep");return e.jsx("div",{className:"term-modal-overlay",onClick:t,children:e.jsxs("div",{className:"term-modal-content",onClick:r=>r.stopPropagation(),children:[e.jsx("div",{className:"term-modal-header",children:e.jsx("h3",{children:"Start Next Term"})}),e.jsxs("div",{className:"term-modal-body",children:[e.jsxs("div",{className:"term-info-row",children:[e.jsx("div",{className:"term-check-icon",children:e.jsx(T,{size:20,color:"#10B981"})}),e.jsx("p",{className:"term-info-text",children:"Starting a new term advances the academic session accordingly."})]}),e.jsxs("p",{className:"term-question",children:["How do you want to handle outstanding payments in the current term ( ",n||"1st Term"," )"]}),e.jsxs("div",{className:"term-radio-group",children:[e.jsxs("label",{className:"term-radio-label",children:[e.jsx("input",{type:"radio",name:"paymentAction",value:"waive",checked:a==="waive",onChange:()=>c("waive")}),e.jsx("span",{className:"radio-text",children:"Waive All Outstanding Payments"})]}),e.jsxs("label",{className:"term-radio-label",children:[e.jsx("input",{type:"radio",name:"paymentAction",value:"keep",checked:a==="keep",onChange:()=>c("keep")}),e.jsx("span",{className:"radio-text",children:"Keep All Outstanding Payments"})]})]})]}),e.jsxs("div",{className:"term-modal-footer",children:[e.jsx("button",{className:"term-next-btn",onClick:()=>o(a),children:"Next"}),e.jsx("button",{className:"term-close-btn",onClick:t,children:"Close"})]})]})})},O=({isOpen:i,onClose:t,onSave:n})=>{if(!i)return null;const[o,a]=l.useState("2026/2027");return e.jsx("div",{className:"new-session-modal-overlay",onClick:t,children:e.jsxs("div",{className:"new-session-modal-content",onClick:c=>c.stopPropagation(),children:[e.jsx("div",{className:"new-session-modal-close",children:e.jsxs("button",{className:"close-btn-circle",onClick:t,children:[e.jsx(g,{size:20,color:"#EF4444"})," "]})}),e.jsxs("div",{className:"new-session-modal-body",children:[e.jsx("h2",{className:"modal-title",children:"Next Session"}),e.jsx("div",{className:"form-group",children:e.jsx("input",{type:"text",className:"session-input",value:o,onChange:c=>a(c.target.value),placeholder:"YYYY/YYYY"})}),e.jsx("button",{className:"save-session-btn",onClick:()=>n(o),children:"Save"})]})]})})},L=({sessions:i=[]})=>{const[t,n]=l.useState(null),[o,a]=l.useState(!1),[c,r]=l.useState(!1),[h,u]=l.useState(null);l.useEffect(()=>{const s=d=>{t&&!d.target.closest(".action-cell")&&n(null)};return document.addEventListener("mousedown",s),()=>document.removeEventListener("mousedown",s)},[t]);const j=s=>{n(t===s?null:s)},p=s=>{u(s),n(null),a(!0)},N=s=>{m.put(`/academic-sessions/${s.id}/toggle-status`,{},{onSuccess:()=>n(null)})},v=s=>{m.post(`/academic-sessions/${h.id}/next-term`,{payment_action:s},{onSuccess:()=>a(!1)})},b=s=>{m.post("/academic-sessions",{year:s},{onSuccess:()=>r(!1)})};return e.jsxs(k,{children:[e.jsx(S,{title:"Academic Sessions"}),e.jsxs("div",{className:"sessions-page",children:[e.jsxs("div",{className:"page-header",children:[e.jsx("h1",{className:"page-title",children:"Sessions"}),e.jsx("button",{className:"new-session-btn",onClick:()=>r(!0),children:"+ New Session"})]}),e.jsxs("div",{className:"sessions-table-container card",children:[e.jsxs("table",{className:"sessions-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"S/N"}),e.jsx("th",{children:"Year"}),e.jsx("th",{children:"Term"}),e.jsx("th",{children:"Status"}),e.jsx("th",{})]})}),e.jsxs("tbody",{children:[i.map((s,d)=>e.jsxs("tr",{children:[e.jsx("td",{children:d+1}),e.jsx("td",{children:s.year}),e.jsx("td",{children:s.term}),e.jsx("td",{children:e.jsxs("span",{className:`status-badge ${s.status}`,children:[e.jsx("span",{className:"status-dot"}),s.status.charAt(0).toUpperCase()+s.status.slice(1)]})}),e.jsxs("td",{className:"action-cell",style:{position:"relative"},children:[e.jsx("button",{className:"action-btn",onClick:()=>j(s.id),children:e.jsx(y,{size:18})}),t===s.id&&e.jsxs("div",{className:"action-dropdown shadow-lg",children:[e.jsxs("button",{className:"dropdown-item",onClick:()=>p(s),children:[e.jsx(f,{size:14}),e.jsx("span",{children:"Next Term"})]}),s.status==="inactive"&&e.jsxs("button",{className:"dropdown-item active-action",onClick:()=>N(s),children:[e.jsx(w,{size:14,color:"#10b981"}),e.jsx("span",{children:"Make Active"})]})]})]})]},s.id)),i.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"empty-state",children:"No sessions found."})})]})]}),e.jsxs("div",{className:"table-pagination",children:[e.jsx("button",{className:"page-nav-btn disabled",children:"« Previous"}),e.jsx("div",{className:"page-numbers",children:e.jsx("button",{className:"page-num-btn active",children:"1"})}),e.jsx("button",{className:"page-nav-btn disabled",children:"Next »"})]})]}),e.jsx(Y,{isOpen:o,onClose:()=>a(!1),currentTerm:h?.term,onNext:v}),e.jsx(O,{isOpen:c,onClose:()=>r(!1),onSave:b})]})]})};export{L as default};
