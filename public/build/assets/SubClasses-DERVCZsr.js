import{u as p,r as m,j as s,R as S,H as C,L as E}from"./app-8SCMTW8O.js";import{X as v,L as k,a as y}from"./Layout-xUua1U_S.js";import{C as z}from"./chevron-left-Cg2Zl8P8.js";import{P as w}from"./plus-CYtWj5bM.js";import{E as L}from"./ellipsis-vertical-BSYuyY6a.js";import"./createLucideIcon-DC07x121.js";const A=({isOpen:d,onClose:i,subClassData:a})=>{const{data:l,setData:t,put:r,processing:n,errors:o,reset:u}=p({name:""});m.useEffect(()=>{a&&t({name:a.name})},[a]);const h=c=>{c.preventDefault(),r(`/students/sub-classes/${a.id}`,{onSuccess:()=>{i(),u()}})};return d?s.jsx("div",{className:"modal-overlay",children:s.jsxs("div",{className:"modal-content",children:[s.jsxs("div",{className:"modal-header",children:[s.jsx("h3",{children:"Customize Sub-Class"}),s.jsx("button",{className:"close-btn",onClick:i,children:s.jsx(v,{size:20})})]}),s.jsxs("form",{onSubmit:h,children:[s.jsx("div",{className:"modal-body",children:s.jsxs("div",{className:"form-group",children:[s.jsx("input",{type:"text",className:"modal-input",value:l.name,onChange:c=>t("name",c.target.value),placeholder:"Enter sub-class name"}),o.name&&s.jsx("div",{className:"text-red-500 text-sm mt-1",children:o.name})]})}),s.jsx("div",{className:"modal-footer",children:s.jsx("button",{type:"submit",className:"save-btn",disabled:n,children:n?"Saving...":"Save Changes"})})]})]})}):null},H=({initialSubClasses:d=[]})=>{const[i,a]=m.useState(!1),[l,t]=m.useState(null),[r,n]=m.useState(null);S.useEffect(()=>{const e=j=>{l&&!j.target.closest(".action-cell")&&t(null)};return document.addEventListener("click",e),()=>document.removeEventListener("click",e)},[l]);const o=e=>{n(e),t(null)},{data:u,setData:h,post:c,processing:b,reset:N,errors:x}=p({name:"",class_id:1}),f=e=>{e.preventDefault(),c("/students/sub-classes",{onSuccess:()=>{a(!1),N()}})};return s.jsxs(k,{children:[s.jsx(C,{title:"Sub Classes"}),s.jsxs("div",{className:"sub-classes-management",children:[s.jsxs("div",{className:"sub-classes-header",children:[s.jsxs("div",{className:"header-left",children:[s.jsx(E,{href:"/students/classes",className:"back-btn",children:s.jsx(z,{size:24})}),s.jsx("h1",{children:"Sub Classes"})]}),s.jsxs("button",{className:"btn-add-subclass",onClick:()=>a(!0),children:[s.jsx(w,{size:16}),"Add New Subclass"]})]}),s.jsxs("div",{className:"table-card card",children:[s.jsx("div",{className:"table-responsive",children:s.jsxs("table",{className:"sub-classes-table",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"S/N"}),s.jsx("th",{children:"Name"}),s.jsx("th",{children:"Students"}),s.jsx("th",{})]})}),s.jsxs("tbody",{children:[d.map((e,j)=>s.jsxs("tr",{children:[s.jsx("td",{children:j+1}),s.jsx("td",{children:e.name}),s.jsxs("td",{children:[e.student_count," Students"]}),s.jsxs("td",{className:"action-cell",style:{position:"relative"},children:[s.jsx("button",{className:"icon-btn",onClick:g=>{g.stopPropagation(),t(l===e.id?null:e.id)},children:s.jsx(L,{size:18})}),l===e.id&&s.jsx("div",{className:"dropdown-menu",children:s.jsxs("button",{className:"dropdown-item",onClick:()=>o(e),children:[s.jsx(y,{size:14}),"Customize"]})})]})]},e.id)),d.length===0&&s.jsx("tr",{children:s.jsx("td",{colSpan:"4",style:{textAlign:"center",padding:"2rem"},children:"No sub-classes found."})})]})]})}),s.jsxs("div",{className:"table-pagination",children:[s.jsx("button",{className:"page-nav-btn disabled",children:"« Previous"}),s.jsx("div",{className:"page-numbers",children:s.jsx("button",{className:"page-num-btn active",children:"1"})}),s.jsx("button",{className:"page-nav-btn disabled",children:"Next »"})]})]}),i&&s.jsx("div",{className:"modal-overlay",onClick:()=>a(!1),children:s.jsxs("div",{className:"subclass-modal",onClick:e=>e.stopPropagation(),children:[s.jsx("button",{className:"modal-close-top",onClick:()=>a(!1),children:s.jsx(v,{size:24,color:"#E91E63"})}),s.jsxs("div",{className:"modal-body",children:[s.jsx("h2",{children:"Add New Subclass"}),s.jsxs("form",{onSubmit:f,children:[s.jsxs("div",{className:"form-group",children:[s.jsx("input",{type:"text",placeholder:"e.g Class section name (A, B, C...)",value:u.name,onChange:e=>h("name",e.target.value),autoFocus:!0,className:x.name?"error":""}),x.name&&s.jsx("span",{className:"error-text",children:x.name})]}),s.jsx("button",{type:"submit",className:"btn-save-changes",disabled:b,children:b?"Saving...":"Save Changes"})]})]})]})})]}),s.jsx(A,{isOpen:!!r,onClose:()=>n(null),subClassData:r})]})};export{H as default};
