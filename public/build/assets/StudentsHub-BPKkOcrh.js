const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/app-9_oLEb-g.js","assets/app-_xkRgTL5.css"])))=>i.map(i=>d[i]);
import{u as k,R as H,j as e,r as j,d as J,H as K,_ as $,L as Q}from"./app-9_oLEb-g.js";import{X as w,L as Z,S as ee,C as se}from"./Layout-CVgtbi8l.js";/* empty css                       */import{C as ae}from"./circle-alert-CKYYSDS4.js";import{U as le}from"./upload-BjGXB_ue.js";import{c as M}from"./createLucideIcon-D3VZeyuY.js";import{P as ne}from"./pen-DvXvgMXB.js";import{T as G}from"./trash-2-e8QC6qro.js";import{D as W}from"./download-DaMS1mGm.js";import{E as te}from"./ellipsis-vertical-C8cOzFMR.js";import{S as ie}from"./square-pen-H96ZgzFi.js";import{W as re}from"./wallet-CpJkG8Pz.js";const ce=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],oe=M("check",ce);const de=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],me=M("external-link",de);const he=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],B=M("user-plus",he),ue=({show:p,onClose:i,selectedStudentIds:a=[],classes:h=[]})=>{if(!p)return null;const{data:u,setData:o,post:m,processing:d,errors:v,reset:r}=k({student_ids:a,target_class_id:"",target_session_id:"",retain_debt:!0});H.useEffect(()=>{p&&o("student_ids",a)},[p,a]);const c=a.length>1,_=t=>{t.preventDefault(),m("/students/promote",{onSuccess:()=>{i()}})};return e.jsx("div",{className:"modal-overlay",onClick:i,children:e.jsxs("div",{className:"modal-content promotion-modal",onClick:t=>t.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("div",{className:"header-title",children:[e.jsx("h3",{children:"Promote Students"}),e.jsxs("p",{children:["Move ",a.length," selected student",c?"s":""," to a new class"]})]}),e.jsx("button",{className:"close-btn",onClick:i,children:e.jsx(w,{size:20})})]}),e.jsxs("div",{className:"warning-banner",children:[e.jsx(ae,{size:18}),e.jsx("span",{children:"This action will update the class for all selected students."})]}),e.jsxs("form",{onSubmit:_,className:"promotion-form",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Target Class"}),e.jsxs("select",{value:u.target_class_id,onChange:t=>o("target_class_id",t.target.value),required:!0,children:[e.jsx("option",{value:"",children:"Select Class"}),h.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]}),v.target_class_id&&e.jsx("span",{className:"error-msg",children:v.target_class_id})]}),e.jsxs("div",{className:"form-footer-actions",children:[e.jsx("button",{type:"button",className:"btn-cancel",onClick:i,children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn-promote",disabled:d,children:d?"Promoting...":"Promote Students"})]})]})]})})},xe=({show:p,onClose:i,classes:a=[],subClasses:h=[]})=>{if(!p)return null;const[u,o]=j.useState("single"),{data:m,setData:d,post:v,processing:r,errors:c,reset:_}=k({name:"",gender:"",class_id:"",sub_class_id:"",auto_reg:!1,admission_number:"",phone:"",email:""}),{data:t,setData:n,post:y,processing:C,errors:N,reset:P}=k({file:null,class_id:"",sub_class_id:""}),E=h,A=l=>{l.preventDefault(),v("/students",{onSuccess:()=>{_(),i()}})},g=l=>{l.preventDefault(),y("/students/import",{onSuccess:()=>{P(),i()},forceFormData:!0})},b=l=>{n("file",l.target.files[0])};return e.jsx("div",{className:"modal-overlay",onClick:i,children:e.jsxs("div",{className:"modal-content add-student-modal",onClick:l=>l.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("div",{className:"header-title",children:e.jsx("h3",{children:"Add Student"})}),e.jsx("button",{className:"close-btn",onClick:i,children:e.jsx(w,{size:20})})]}),e.jsxs("div",{className:"modal-tabs",children:[e.jsx("button",{className:`tab-btn ${u==="single"?"active":""}`,onClick:()=>o("single"),children:"Single Student"}),e.jsx("button",{className:`tab-btn ${u==="multiple"?"active":""}`,onClick:()=>o("multiple"),children:"Multiple Students (CSV)"})]}),u==="single"?e.jsxs("form",{onSubmit:A,className:"student-form",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Full Name"}),e.jsx("input",{type:"text",placeholder:"Student full name",value:m.name,onChange:l=>d("name",l.target.value),className:c.name?"error-input":""}),c.name&&e.jsx("span",{className:"error-msg",children:c.name})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Gender"}),e.jsx("input",{type:"text",placeholder:"Gender",value:m.gender,onChange:l=>d("gender",l.target.value),className:(c.gender,"hidden")}),e.jsxs("select",{value:m.gender,onChange:l=>d("gender",l.target.value),className:c.gender?"error-input":"",children:[e.jsx("option",{value:"",children:"Gender"}),e.jsx("option",{value:"Male",children:"Male"}),e.jsx("option",{value:"Female",children:"Female"})]}),c.gender&&e.jsx("span",{className:"error-msg",children:c.gender})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Class"}),e.jsxs("select",{value:m.class_id,onChange:l=>d("class_id",l.target.value),className:c.class_id?"error-input":"",children:[e.jsx("option",{value:"",children:"--Select class--"}),a.map(l=>e.jsx("option",{value:l.id,children:l.name},l.id))]}),c.class_id&&e.jsx("span",{className:"error-msg",children:c.class_id})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Subclass"}),e.jsxs("select",{value:m.sub_class_id,onChange:l=>d("sub_class_id",l.target.value),className:c.sub_class_id?"error-input":"",children:[e.jsx("option",{value:"",children:"Select Subclass"}),E.map(l=>e.jsx("option",{value:l.id,children:l.name},l.id))]}),c.sub_class_id&&e.jsx("span",{className:"error-msg",children:c.sub_class_id})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Phone Number"}),e.jsx("input",{type:"text",placeholder:"Student or Parent phone",value:m.phone,onChange:l=>d("phone",l.target.value),className:c.phone?"error-input":""}),c.phone&&e.jsx("span",{className:"error-msg",children:c.phone})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Email Address"}),e.jsx("input",{type:"email",placeholder:"For virtual account generation",value:m.email,onChange:l=>d("email",l.target.value),className:c.email?"error-input":""}),c.email&&e.jsx("span",{className:"error-msg",children:c.email})]}),e.jsx("div",{className:"form-checkbox-group",children:e.jsxs("label",{className:"checkbox-container",children:[e.jsx("input",{type:"checkbox",checked:m.auto_reg,onChange:l=>d("auto_reg",l.target.checked)}),e.jsx("span",{className:"checkmark"}),"Auto generate reg number ?"]})}),!m.auto_reg&&e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Reg Number"}),e.jsx("input",{type:"text",placeholder:"Enter Reg Number",value:m.admission_number,onChange:l=>d("admission_number",l.target.value),className:c.admission_number?"error-input":""}),c.admission_number&&e.jsx("span",{className:"error-msg",children:c.admission_number})]}),e.jsx("button",{type:"submit",className:"btn-promote full-width mt-6",disabled:r,children:r?"Saving...":"Save"})]}):e.jsxs("form",{onSubmit:g,className:"student-form",children:[e.jsxs("div",{className:"download-template-area",children:[e.jsx("a",{href:"/students/template",target:"_blank",className:"download-link",children:"Download Sample File Here. Do not change the headers !"}),"                        "]}),e.jsxs("div",{className:"file-upload-area",children:[e.jsx("input",{type:"file",id:"csv-upload-tab",accept:".csv",onChange:b,className:"hidden-file-input"}),e.jsxs("label",{htmlFor:"csv-upload-tab",className:"upload-label",children:[e.jsx("div",{className:"upload-icon-wrapper",children:e.jsx(le,{size:32})}),e.jsxs("span",{className:"upload-text",children:["Drop your students file here or ",e.jsx("span",{className:"highlight-text",children:"Browse"})]}),e.jsx("span",{className:"upload-subtext",children:"Supports: CSV, XLS, XLSX"}),t.file&&e.jsx("div",{className:"file-name-tag",children:t.file.name})]}),N.file&&e.jsx("div",{className:"error-msg mt-2",children:N.file})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Class"}),e.jsxs("select",{value:t.class_id,onChange:l=>n("class_id",l.target.value),className:N.class_id?"error-input":"",children:[e.jsx("option",{value:"",children:"--Select class--"}),a.map(l=>e.jsx("option",{value:l.id,children:l.name},l.id))]}),N.class_id&&e.jsx("span",{className:"error-msg",children:N.class_id})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Subclass"}),e.jsxs("select",{value:t.sub_class_id,onChange:l=>n("sub_class_id",l.target.value),className:N.sub_class_id?"error-input":"",children:[e.jsx("option",{value:"",children:"Select Subclass"}),E.map(l=>e.jsx("option",{value:l.id,children:l.name},l.id))]}),N.sub_class_id&&e.jsx("span",{className:"error-msg",children:N.sub_class_id})]}),e.jsx("button",{type:"submit",className:"btn-promote full-width",disabled:C||!t.file,children:C?"Saving...":"Save"})]})]})})},pe=({show:p,onClose:i,onExport:a,hasActiveFilters:h})=>{if(!p)return null;const[u,o]=j.useState(h?"filtered":"all"),m=()=>{a(u),i()};return e.jsx("div",{className:"modal-overlay",onClick:i,children:e.jsxs("div",{className:"modal-content promotion-modal",onClick:d=>d.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("div",{className:"header-title",children:[e.jsx("h3",{children:"Export student records"}),e.jsx("p",{children:"Which records do you want to export?"})]}),e.jsx("button",{className:"close-btn",onClick:i,children:e.jsx(w,{size:20})})]}),e.jsxs("div",{className:"promotion-form",children:[e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"radio-option",children:[e.jsx("input",{type:"radio",name:"exportType",value:"filtered",checked:u==="filtered",onChange:()=>o("filtered"),disabled:!h}),e.jsx("div",{className:"radio-content",children:e.jsx("span",{className:`radio-label ${h?"":"disabled"}`,children:"With current filters"})})]}),e.jsxs("label",{className:"radio-option mt-4",children:[e.jsx("input",{type:"radio",name:"exportType",value:"all",checked:u==="all",onChange:()=>o("all")}),e.jsx("div",{className:"radio-content",children:e.jsx("span",{className:"radio-label",children:"All student records"})})]})]}),e.jsx("div",{className:"form-footer-actions",children:e.jsx("button",{type:"button",className:"btn-promote full-width",onClick:m,children:"Export"})})]})]})})},je=({show:p,onClose:i,student:a,classes:h=[],subClasses:u=[]})=>{if(!p||!a)return null;const{data:o,setData:m,put:d,processing:v,errors:r,reset:c}=k({name:"",gender:"",class_id:"",sub_class_id:"",phone:"",email:""});j.useEffect(()=>{a&&m({name:a.name||"",gender:a.gender||"",class_id:a.class_id||"",sub_class_id:a.sub_class_id||"",phone:a.phone||"",email:a.email||""})},[a]);const _=u,t=n=>{n.preventDefault(),d(`/students/${a.id}`,{onSuccess:()=>{i(),c()}})};return e.jsx("div",{className:"modal-overlay",onClick:i,children:e.jsxs("div",{className:"modal-content add-student-modal",onClick:n=>n.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("div",{className:"header-title",children:e.jsx("h3",{children:"Edit Student"})}),e.jsx("button",{className:"close-btn",onClick:i,children:e.jsx(w,{size:20})})]}),e.jsxs("form",{onSubmit:t,className:"student-form",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Full Name"}),e.jsx("input",{type:"text",placeholder:"Student full name",value:o.name,onChange:n=>m("name",n.target.value),className:r.name?"error-input":""}),r.name&&e.jsx("span",{className:"error-msg",children:r.name})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Gender"}),e.jsxs("select",{value:o.gender,onChange:n=>m("gender",n.target.value),className:r.gender?"error-input":"",children:[e.jsx("option",{value:"",children:"Gender"}),e.jsx("option",{value:"Male",children:"Male"}),e.jsx("option",{value:"Female",children:"Female"})]}),r.gender&&e.jsx("span",{className:"error-msg",children:r.gender})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Class"}),e.jsxs("select",{value:o.class_id,onChange:n=>{m(y=>({...y,class_id:n.target.value,sub_class_id:""}))},className:r.class_id?"error-input":"",children:[e.jsx("option",{value:"",children:"--Select class--"}),h.map(n=>e.jsx("option",{value:n.id,children:n.name},n.id))]}),r.class_id&&e.jsx("span",{className:"error-msg",children:r.class_id})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Subclass"}),e.jsxs("select",{value:o.sub_class_id,onChange:n=>m("sub_class_id",n.target.value),className:r.sub_class_id?"error-input":"",children:[e.jsx("option",{value:"",children:"Select Subclass"}),_.map(n=>e.jsx("option",{value:n.id,children:n.name},n.id))]}),r.sub_class_id&&e.jsx("span",{className:"error-msg",children:r.sub_class_id})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Phone Number"}),e.jsx("input",{type:"text",placeholder:"Student or Parent phone",value:o.phone,onChange:n=>m("phone",n.target.value),className:r.phone?"error-input":""}),r.phone&&e.jsx("span",{className:"error-msg",children:r.phone})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Email Address"}),e.jsx("input",{type:"email",placeholder:"For virtual account generation",value:o.email,onChange:n=>m("email",n.target.value),className:r.email?"error-input":""}),r.email&&e.jsx("span",{className:"error-msg",children:r.email})]}),e.jsx("div",{className:"modal-footer-actions mt-6",children:e.jsx("button",{type:"submit",className:"btn-promote full-width",disabled:v,children:v?"Saving Changes...":"Save Changes"})})]})]})})},ge=({show:p,onClose:i,student:a})=>!p||!a?null:e.jsx("div",{className:"modal-overlay",onClick:i,children:e.jsxs("div",{className:"modal-content student-details-modal",onClick:h=>h.stopPropagation(),children:[e.jsx("div",{className:"modal-header no-border",children:e.jsx("button",{className:"close-btn",onClick:i,children:e.jsx(w,{size:20})})}),e.jsxs("div",{className:"details-scroll-content",children:[e.jsxs("div",{className:"profile-header-section",children:[e.jsxs("div",{className:"profile-avatar-wrapper",children:[e.jsx("div",{className:"large-avatar",children:a.name.charAt(0)}),e.jsx("div",{className:"verify-badge",children:e.jsx(oe,{size:12,color:"white"})})]}),e.jsxs("div",{className:"profile-identity",children:[e.jsx("h3",{children:a.name}),e.jsx("span",{className:"reg-no",children:a.admission_number||"No Reg No"})]})]}),e.jsxs("div",{className:"info-grid-section",children:[e.jsxs("div",{className:"info-row",children:[e.jsx("span",{className:"info-label",children:"Gender"}),e.jsx("span",{className:"info-value",children:a.gender}),e.jsx("span",{className:"info-label",children:"Class"}),e.jsx("span",{className:"info-value",children:a.class_name})]}),e.jsxs("div",{className:"info-row",children:[e.jsx("span",{className:"info-label",children:"Email"}),e.jsx("span",{className:"info-value full-width",children:a.email||"N/A"})]}),e.jsxs("div",{className:"info-row",children:[e.jsx("span",{className:"info-label",children:"Phone"}),e.jsx("span",{className:"info-value full-width",children:a.phone||"N/A"})]}),e.jsxs("div",{className:"info-row",children:[e.jsx("span",{className:"info-label",children:"School Name:"}),e.jsx("span",{className:"info-value full-width",children:a.school_name})]}),e.jsxs("div",{className:"info-row",children:[e.jsx("span",{className:"info-label",children:"Added On"}),e.jsx("span",{className:"info-value full-width",children:a.added_on})]}),e.jsxs("div",{className:"info-row",children:[e.jsx("span",{className:"info-label",children:"Session Added"}),e.jsx("span",{className:"info-value full-width",children:a.session_added})]})]}),e.jsxs("div",{className:"detail-section",children:[e.jsxs("div",{className:"section-header",children:[e.jsx("h4",{children:"Academic History"}),e.jsx("button",{className:"edit-icon-btn",children:e.jsx(ne,{size:12})})]}),e.jsx("div",{className:"history-cards",children:a.academic_history&&a.academic_history.length>0?a.academic_history.map((h,u)=>e.jsxs("div",{className:"history-card",children:[e.jsxs("div",{className:"history-title",children:["Class: ",h.class]}),e.jsxs("div",{className:"history-session",children:["Session ",h.session]})]},u)):e.jsxs("div",{className:"history-card",children:[e.jsx("div",{className:"history-title",children:"Current Class"}),e.jsx("div",{className:"history-session",children:a.class_name})]})})]}),e.jsxs("div",{className:"detail-section",children:[e.jsx("h4",{children:"Account Numbers"}),e.jsx("div",{className:"accounts-list",children:a.account_numbers&&a.account_numbers.length>0?a.account_numbers.map((h,u)=>e.jsxs("div",{className:"account-card",children:[e.jsxs("div",{className:"acc-label",children:["Account ",u+1]}),e.jsxs("div",{className:"acc-row",children:["Account Number: ",e.jsx("span",{className:"acc-val",children:h.number})]}),e.jsxs("div",{className:"acc-row",children:["Account Name: ",e.jsx("span",{className:"acc-val",children:h.name})]}),e.jsxs("div",{className:"acc-row",children:["Account Bank: ",e.jsx("span",{className:"acc-val",children:h.bank})]})]},u)):e.jsx("div",{className:"account-card",children:e.jsx("div",{className:"acc-label",children:"No Account Assigned"})})})]})]})]})}),ve=({show:p,onClose:i,selectedStudentIds:a=[]})=>{if(!p)return null;const{post:h,processing:u}=k({student_ids:a}),o=a.length>1,m=d=>{d.preventDefault(),h("/students/bulk-graduate",{onSuccess:()=>{i()}})};return e.jsx("div",{className:"modal-overlay",onClick:i,style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:e.jsxs("div",{className:"modal-content",onClick:d=>d.stopPropagation(),style:{background:"white",padding:"40px",borderRadius:"32px",width:"90%",maxWidth:"500px",textAlign:"center",boxShadow:"0 10px 40px rgba(0,0,0,0.1)"},children:[e.jsxs("h3",{style:{margin:"0 0 12px",fontSize:"1.5rem",fontWeight:"800"},children:["You are about to graduate ",a.length," selected student",o?"s":""]}),e.jsx("p",{style:{margin:"0 0 32px",color:"#666",fontSize:"1.1rem",lineHeight:"1.5"},children:"They will no longer appear in the list of students required to pay fees"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px"},children:[e.jsx("button",{onClick:i,style:{padding:"16px",borderRadius:"12px",border:"1px solid #000",background:"white",color:"#000",fontSize:"1.1rem",fontWeight:"600",cursor:"pointer"},children:"Cancel"}),e.jsx("button",{onClick:m,disabled:u,style:{padding:"16px",borderRadius:"12px",border:"none",background:"#D1127B",color:"white",fontSize:"1.1rem",fontWeight:"600",cursor:"pointer"},children:u?"Processing...":"Proceed"})]})]})})},De=({initialStudents:p=[],initialClasses:i=[],initialSubClasses:a=[]})=>{const[h,u]=j.useState(""),[o,m]=j.useState(""),[d,v]=j.useState(""),[r,c]=j.useState("active"),_=p,[t,n]=j.useState([]),[y,C]=j.useState(!1),[N,P]=j.useState(!1),[E,A]=j.useState(!1),[g,b]=j.useState(null),[l,z]=j.useState(null),[F,L]=j.useState(null),[V,T]=j.useState(!1);H.useEffect(()=>{const s=x=>{g&&!x.target.closest(".student-action-menu")&&!x.target.closest(".actions-cell")&&b(null)};return document.addEventListener("mousedown",s),()=>document.removeEventListener("mousedown",s)},[g]);const R=a.filter(s=>!o||s.class_id==o||!s.class_id),S=_.filter(s=>{const x=s.name.toLowerCase().includes(h.toLowerCase())||s.admission_number.toLowerCase().includes(h.toLowerCase()),f=o?s.class_id==o:!0,D=d?s.sub_class_id==d:!0,Y=r?(s.status||"active")===r:!0;return x&&f&&D&&Y}),q=s=>{switch(s?.toLowerCase()){case"paid":return"active";case"partial":return"partial";case"pending":return"inactive";default:return"inactive"}},X=s=>{s.target.checked?n(S.map(x=>x.id)):n([])},O=s=>{t.includes(s)?n(t.filter(x=>x!==s)):n([...t,s])},U=s=>{m(s.target.value),v("")},I=s=>{let x="/students/export";if(s==="filtered"){const f=new URLSearchParams;o&&f.append("class_id",o),d&&f.append("sub_class_id",d),r&&f.append("status",r),x+=`?${f.toString()}`}window.location.href=x};return e.jsxs(e.Fragment,{children:[e.jsxs(Z,{children:[e.jsx(K,{title:`Students - ${_.length}`}),e.jsxs("div",{className:"students-page-container",children:[e.jsxs("div",{className:"students-top-bar",children:[e.jsxs("h1",{className:"page-heading",children:["Students - ",e.jsx("span",{className:"count",children:S.length.toLocaleString()})]}),e.jsx("div",{className:"header-actions",children:t.length>0?e.jsxs("div",{style:{display:"flex",gap:"10px"},children:[e.jsxs("button",{className:"btn-promote-action",onClick:()=>{confirm(`Are you sure you want to delete ${t.length} students? This action cannot be undone.`)&&$(async()=>{const{router:s}=await import("./app-9_oLEb-g.js").then(x=>x.i);return{router:s}},__vite__mapDeps([0,1])).then(({router:s})=>{s.delete("/students/bulk-delete",{data:{student_ids:t},onSuccess:()=>n([])})})},style:{background:"#ff4d4f",borderColor:"#ff4d4f"},children:[e.jsx(G,{size:18}),"Delete (",t.length,")"]}),e.jsxs("button",{className:"btn-promote-action",onClick:()=>T(!0),style:{background:"#D1127B",borderColor:"#D1127B"},children:[e.jsx(W,{size:18,style:{transform:"rotate(180deg)"}}),"Graduate (",t.length,")"]}),e.jsxs("button",{className:"btn-promote-action",onClick:()=>C(!0),children:[e.jsx(B,{size:18}),"Promote (",t.length,")"]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("button",{className:"import-btn-outline",onClick:()=>P(!0),children:[e.jsx(B,{size:18}),"+ Add Student"]}),e.jsxs("button",{className:"export-btn-primary",onClick:()=>A(!0),children:[e.jsx(W,{size:18}),"Export"]})]})})]}),e.jsxs("div",{className:"students-table-card card",children:[e.jsxs("div",{className:"table-filters-row",children:[e.jsx("div",{className:"filter-group",children:e.jsxs("select",{value:o,onChange:U,className:"filter-select",children:[e.jsx("option",{value:"",children:"Filter by class"}),i.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]})}),e.jsx("div",{className:"filter-group",children:e.jsxs("select",{value:d,onChange:s=>v(s.target.value),className:"filter-select",disabled:!o&&R.length>10,children:[e.jsx("option",{value:"",children:"Filter by subclass"}),R.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]})}),e.jsxs("div",{className:"search-wrapper",children:[e.jsx(ee,{size:18,className:"search-icon"}),e.jsx("input",{type:"text",placeholder:"Search by name or reg number",value:h,onChange:s=>u(s.target.value)})]}),e.jsx("div",{className:"filter-group",children:e.jsxs("select",{value:r,onChange:s=>c(s.target.value),className:"filter-select",children:[e.jsx("option",{value:"active",children:"Active Students"}),e.jsx("option",{value:"graduated",children:"Graduated"}),e.jsx("option",{value:"inactive",children:"Inactive"}),e.jsx("option",{value:"",children:"All Statuses"})]})})]}),e.jsx("div",{className:"table-scroll-area",children:e.jsxs("table",{className:"students-data-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"checkbox-col",children:e.jsx("input",{type:"checkbox",onChange:X,checked:S.length>0&&t.length===S.length})}),e.jsx("th",{children:"S/N"}),e.jsx("th",{children:"Payer"}),e.jsx("th",{children:"Reg Number"}),e.jsx("th",{children:"Class"}),e.jsx("th",{children:"Phone"}),e.jsx("th",{className:"status-col",children:"Status"}),e.jsx("th",{className:"actions-col"})]})}),e.jsxs("tbody",{children:[S.map((s,x)=>e.jsxs("tr",{className:t.includes(s.id)?"selected-row":"",children:[e.jsx("td",{className:"checkbox-col",children:e.jsx("input",{type:"checkbox",onChange:()=>O(s.id),checked:t.includes(s.id)})}),e.jsx("td",{children:x+1}),e.jsx("td",{className:"payer-cell",children:e.jsxs("div",{className:"payer-info",children:[e.jsx("div",{className:"avatar-placeholder",children:s.name.charAt(0)}),e.jsx(Q,{href:`/students/${s.id}`,className:"payer-name hover:text-pink-600 hover:underline",children:s.name})]})}),e.jsx("td",{children:s.admission_number}),e.jsxs("td",{children:[s.class_name," (",s.sub_class_name,")"]}),e.jsx("td",{children:s.phone}),e.jsxs("td",{children:[e.jsxs("span",{className:`status-pill ${q(s.payment_status)}`,children:[e.jsx("span",{className:"pill-dot"}),s.payment_status]}),s.status==="graduated"&&e.jsx("span",{className:"status-pill",style:{background:"#f0f0f0",color:"#666",marginLeft:"8px"},children:"Graduated"})]}),e.jsx("td",{className:"actions-cell",children:e.jsx("button",{className:"row-toggle-btn",onClick:f=>{f.stopPropagation();const D=f.currentTarget.getBoundingClientRect();g?.id===s.id?b(null):b({id:s.id,top:D.bottom+window.scrollY+5,left:D.left+window.scrollX-140})},children:e.jsx(te,{size:16})})})]},s.id)),S.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:"8",className:"no-records",children:"No students found."})})]})]})}),e.jsxs("div",{className:"table-footer-pagination",children:[e.jsx("button",{className:"nav-page-btn disabled",children:"« Previous"}),e.jsx("div",{className:"center-page-num",children:e.jsx("span",{className:"page-box active",children:"1"})}),e.jsx("button",{className:"nav-page-btn disabled",children:"Next »"})]})]})]}),e.jsx(ue,{show:y,onClose:()=>C(!1),selectedStudentIds:t,classes:i}),e.jsx(xe,{show:N,onClose:()=>P(!1),classes:i,subClasses:a}),e.jsx(pe,{show:E,onClose:()=>A(!1),onExport:I,hasActiveFilters:!!o||!!d}),e.jsx(je,{show:!!l,onClose:()=>z(null),student:l,classes:i,subClasses:a}),e.jsx(ge,{show:!!F,onClose:()=>L(null),student:F}),e.jsx(ve,{show:V,onClose:()=>T(!1),selectedStudentIds:t})]}),g&&J.createPortal(e.jsxs("div",{className:"student-action-menu fixed-menu",style:{top:`${g.top}px`,left:`${g.left}px`,position:"fixed",margin:0,zIndex:9999},onClick:s=>s.stopPropagation(),children:[e.jsxs("button",{className:"action-item",onClick:()=>{const s=S.find(x=>x.id===g.id);z(s),b(null)},children:[e.jsx(ie,{size:14}),"Edit"]}),e.jsxs("button",{className:"action-item",onClick:()=>{const s=S.find(x=>x.id===g.id);L(s),b(null)},children:[e.jsx(me,{size:14}),"View Details"]}),e.jsxs("button",{className:"action-item delete",onClick:()=>{confirm("Are you sure you want to delete this student profile?")&&$(async()=>{const{router:s}=await import("./app-9_oLEb-g.js").then(x=>x.i);return{router:s}},__vite__mapDeps([0,1])).then(({router:s})=>{s.delete(`/students/${g.id}`,{onSuccess:()=>b(null)})})},children:[e.jsx(G,{size:14}),"Delete"]}),e.jsxs("button",{className:"action-item",onClick:()=>{console.log("Payment",g.id),b(null)},children:[e.jsx(se,{size:14}),"Payment Activity"]}),e.jsxs("button",{className:"action-item",onClick:()=>{console.log("Wallet",g.id),b(null)},children:[e.jsx(re,{size:14}),"Wallet"]})]}),document.body)]})};export{De as default};
