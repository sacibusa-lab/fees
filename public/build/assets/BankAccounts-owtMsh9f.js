import{u as k,r as t,b as A,j as e,H as S}from"./app-B4iSoE2X.js";import{X as y,L as B}from"./Layout-BW8EydTd.js";import{I as C}from"./info-d1dv5hH0.js";import"./createLucideIcon-C4B_0vMl.js";const E=({isOpen:l,onClose:c,banks:d=[]})=>{if(!l)return null;const{data:s,setData:n,post:u,processing:h,reset:N,errors:V}=k({bank_name:"",bank_code:"",account_number:"",account_name:"",type:"Sub Account"}),[x,b]=t.useState(!1),[o,i]=t.useState(null),[j,r]=t.useState(null);t.useEffect(()=>{s.bank_code&&s.account_number.length===10?_():(i(null),r(null))},[s.bank_code,s.account_number]);const _=async()=>{b(!0),r(null);try{const a=await A.post("/business/bank-accounts/validate",{bank_code:s.bank_code,account_number:s.account_number});a.data.status?(i(a.data.account_name),n("account_name",a.data.account_name)):(i(null),r("Could not resolve account details."))}catch{i(null),r("Validation failed. Please check details.")}finally{b(!1)}},f=a=>{a.preventDefault(),o&&u("/business/bank-accounts",{onSuccess:()=>{N(),c()}})},g=a=>{const p=a.target.value,v=d.find(m=>m.name===p);n(m=>({...m,bank_name:p,bank_code:v?v.code:""}))};return e.jsx("div",{className:"modal-overlay",onClick:c,children:e.jsxs("div",{className:"modal-content",onClick:a=>a.stopPropagation(),children:[e.jsx("div",{className:"modal-close-container",children:e.jsx("button",{className:"modal-close-btn",onClick:c,children:e.jsx(y,{size:20,color:"#EF4444"})})}),e.jsxs("div",{className:"modal-body",children:[e.jsx("h2",{className:"modal-title",children:"Add Sub Account"}),e.jsxs("form",{onSubmit:f,children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Bank"}),e.jsxs("select",{className:"form-select",value:s.bank_name,onChange:g,children:[e.jsx("option",{value:"",children:"Select Bank"}),d.map(a=>e.jsx("option",{value:a.name,children:a.name},a.code))]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Account Number"}),e.jsx("input",{type:"text",className:"form-input",value:s.account_number,onChange:a=>n("account_number",a.target.value),placeholder:"10 digit bank account number",maxLength:10})]}),x&&e.jsx("div",{className:"validation-status validating",children:"Validating account details..."}),o&&e.jsxs("div",{className:"validation-success",children:[e.jsx("div",{className:"success-icon",children:e.jsx(C,{size:18,color:"white",fill:"#10B981"})}),e.jsx("span",{className:"account-name",children:o})]}),j&&e.jsx("div",{className:"validation-error",children:j}),e.jsx("button",{type:"submit",className:"save-btn",disabled:!o||h||x,children:h?"Saving...":"Save"})]})]})]})})},O=({accounts:l=[],banks:c=[]})=>{const[d,s]=t.useState(!1);return e.jsxs(B,{children:[e.jsx(S,{title:"Bank Accounts"}),e.jsxs("div",{className:"bank-accounts-page",children:[e.jsxs("div",{className:"page-header",children:[e.jsx("h1",{className:"page-title",children:"Bank Accounts"}),e.jsx("button",{className:"add-account-btn",onClick:()=>s(!0),children:"+ Add Sub Account"})]}),e.jsxs("div",{className:"accounts-table-container card",children:[e.jsxs("table",{className:"accounts-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"S/N"}),e.jsx("th",{children:"Sub Account Code"}),e.jsx("th",{children:"Bank Name"}),e.jsx("th",{children:"Account Name"}),e.jsx("th",{children:"Account Number"}),e.jsx("th",{children:"Type"})]})}),e.jsxs("tbody",{children:[l.map((n,u)=>e.jsxs("tr",{children:[e.jsx("td",{children:u+1}),e.jsx("td",{children:n.sub_account_code||"-"}),e.jsx("td",{children:n.bank_name}),e.jsx("td",{children:n.account_name}),e.jsx("td",{children:n.account_number}),e.jsx("td",{children:n.sub_account_code?"Sub Account":"Primary Account"})]},n.id)),l.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"empty-state",children:"No bank accounts found."})})]})]}),e.jsxs("div",{className:"table-pagination",children:[e.jsx("button",{className:"page-nav-btn disabled",children:"« Previous"}),e.jsx("div",{className:"page-numbers",children:e.jsx("button",{className:"page-num-btn active",children:"1"})}),e.jsx("button",{className:"page-nav-btn disabled",children:"Next »"})]})]}),e.jsx(E,{isOpen:d,onClose:()=>s(!1),banks:c})]})]})};export{O as default};
