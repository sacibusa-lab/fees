import{r as y,u as g,j as e,H as _,L as S,a as m}from"./app-9_oLEb-g.js";import{L as A,C as d,a as C}from"./Layout-CVgtbi8l.js";import{A as x}from"./StudentProfile-B1G4lsQ_.js";import{A as P}from"./arrow-left-Dq_ZRLZH.js";import{U as k}from"./user-D3b6X1up.js";import{S as $}from"./save-Dr3MnOCJ.js";import{T as z}from"./trash-2-e8QC6qro.js";import"./createLucideIcon-D3VZeyuY.js";const G=({student:a,classes:j,subClasses:u,paymentActivity:o=[],allTransactions:h=[],currentSessionName:p="N/A"})=>{const[i,t]=y.useState("profile"),{data:l,setData:n,put:v,processing:c,errors:r}=g({name:a.name,gender:a.gender,class_id:a.class_id,sub_class_id:a.sub_class_id}),N=s=>{s.preventDefault(),v(`/students/${a.id}`,{preserveScroll:!0,onSuccess:()=>alert("Student updated successfully!")})},f=()=>{confirm("Are you sure you want to delete this student? This action cannot be undone.")&&m.delete(`/students/${a.id}`,{onSuccess:()=>alert("Student profile deleted successfully")})};return e.jsxs(A,{children:[e.jsx(_,{title:`${a.name} - Profile`}),e.jsxs("div",{className:"student-profile-container",children:[e.jsxs("div",{className:"profile-header",children:[e.jsxs(S,{href:"/students",className:"back-link",children:[e.jsx(P,{size:20})," Back to Students"]}),e.jsxs("div",{className:"profile-summary",children:[e.jsx("div",{className:"profile-avatar-large",children:a.name.charAt(0)}),e.jsxs("div",{className:"profile-info-primary",children:[e.jsx("h1",{children:a.name}),e.jsxs("div",{className:"profile-meta",children:[e.jsx("span",{className:"meta-item",children:a.admission_number}),e.jsx("span",{className:"meta-dot",children:"•"}),e.jsxs("span",{className:"meta-item",children:[a.class_name," (",a.sub_class_name,")"]}),e.jsx("span",{className:"meta-dot",children:"•"}),e.jsx("span",{className:`status-pill ${a.payment_status}`,children:a.payment_status})]})]})]}),e.jsxs("div",{className:"profile-tabs",children:[e.jsxs("button",{className:`tab-item ${i==="profile"?"active":""}`,onClick:()=>t("profile"),children:[e.jsx(k,{size:18})," Profile Details"]}),e.jsxs("button",{className:`tab-item ${i==="accounts"?"active":""}`,onClick:()=>t("accounts"),children:[e.jsx(d,{size:18})," Virtual Accounts"]}),e.jsxs("button",{className:`tab-item ${i==="activity"?"active":""}`,onClick:()=>t("activity"),children:[e.jsx(x,{size:18})," Payment Activity"]}),e.jsxs("button",{className:`tab-item ${i==="settings"?"active":""}`,onClick:()=>t("settings"),children:[e.jsx(C,{size:18})," Settings"]})]})]}),e.jsxs("div",{className:"profile-content",children:[i==="profile"&&e.jsxs("div",{className:"content-card",children:[e.jsxs("div",{className:"card-header",children:[e.jsx("h3",{children:"Personal Information"}),e.jsx("p",{children:"View and update student details."})]}),e.jsxs("form",{onSubmit:N,className:"profile-form",children:[e.jsxs("div",{className:"form-grid",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Full Name"}),e.jsx("input",{type:"text",value:l.name,onChange:s=>n("name",s.target.value),className:r.name?"error":""}),r.name&&e.jsx("span",{className:"error-msg",children:r.name})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Gender"}),e.jsxs("select",{value:l.gender,onChange:s=>n("gender",s.target.value),children:[e.jsx("option",{value:"Male",children:"Male"}),e.jsx("option",{value:"Female",children:"Female"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Class"}),e.jsx("select",{value:l.class_id,onChange:s=>n("class_id",s.target.value),children:j.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Subclass"}),e.jsxs("select",{value:l.sub_class_id,onChange:s=>n("sub_class_id",s.target.value),children:[e.jsx("option",{value:"",children:"Select Subclass"}),u.filter(s=>!l.class_id||s.class_id==l.class_id||!s.class_id).map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Email Address"}),e.jsx("input",{type:"text",value:a.email||"N/A",disabled:!0,className:"disabled-input"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Student Phone"}),e.jsx("input",{type:"text",value:a.phone||"N/A",disabled:!0,className:"disabled-input"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Guardian Phone"}),e.jsx("input",{type:"text",value:a.guardian_phone||"N/A",disabled:!0,className:"disabled-input"})]})]}),e.jsx("div",{className:"form-actions",children:e.jsxs("button",{type:"submit",className:"btn-save",disabled:c,children:[e.jsx($,{size:18}),c?"Saving...":"Save Changes"]})})]})]}),i==="accounts"&&e.jsxs("div",{className:"content-card",children:[e.jsxs("div",{className:"card-header flex-between",children:[e.jsxs("div",{children:[e.jsx("h3",{children:"Virtual Accounts"}),e.jsx("p",{children:"Dedicated accounts for student fee payments."})]}),!a.has_vaccount&&e.jsxs("button",{className:"btn-generate-va",onClick:()=>m.post(`/students/${a.id}/virtual-account`),disabled:c,children:[e.jsx(d,{size:18})," Generate Virtual Account"]})]}),e.jsx("div",{className:"accounts-list",children:a.account_numbers.length>0?a.account_numbers.map((s,b)=>e.jsxs("div",{className:`account-item ${s.is_dva?"dva-item":""}`,children:[e.jsx("div",{className:"bank-logo",children:s.bank.charAt(0)}),e.jsxs("div",{className:"account-details",children:[e.jsxs("div",{className:"account-header",children:[e.jsx("h4",{children:s.bank}),e.jsx("span",{className:`acc-pill ${s.is_dva?"dva":"regular"}`,children:s.is_dva?"Dedicated":"Regular"})]}),e.jsxs("div",{className:"account-number-row",children:[e.jsx("span",{className:"acc-num",children:s.number}),e.jsx("span",{className:"acc-name",children:s.name})]})]})]},b)):e.jsxs("div",{className:"empty-state",children:[e.jsx(d,{size:48}),e.jsx("p",{children:"No payment accounts associated with this student."})]})}),a.has_vaccount&&e.jsx("div",{className:"va-notice",children:e.jsx("p",{children:"Payments to this dedicated account are automatically verified and credited to the student."})})]}),i==="activity"&&e.jsxs("div",{className:"content-card no-padding",children:[e.jsxs("div",{className:"card-header activity-header",children:[e.jsx("h3",{children:"Payment Activity"}),e.jsx("p",{children:"Summary of termly fee payments."})]}),o.length>0?e.jsx("div",{className:"activity-table-container",children:e.jsxs("table",{className:"activity-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"S/N"}),e.jsxs("th",{children:[p," SESSION"]}),e.jsx("th",{children:"Amount Paid"}),e.jsx("th",{children:"Date Of Payment"}),e.jsx("th",{children:"Method"})]})}),e.jsx("tbody",{children:o.map(s=>e.jsxs("tr",{children:[e.jsx("td",{children:s.sn}),e.jsx("td",{children:e.jsxs("div",{className:"term-status-cell",children:[e.jsx("span",{className:"term-name",children:s.term}),e.jsx("span",{className:`status-badge-term ${s.status.toLowerCase()}`,children:s.status})]})}),e.jsx("td",{className:"amount-cell",children:s.paid_formatted}),e.jsx("td",{children:s.date}),e.jsx("td",{children:s.method})]},s.sn))})]})}):e.jsxs("div",{className:"empty-state",children:[e.jsx(x,{size:48}),e.jsx("p",{children:"No recent payment activity found."})]}),e.jsxs("div",{className:"card-header activity-header transaction-history-header",children:[e.jsx("h3",{children:"Transaction History"}),e.jsx("p",{children:"Detailed record of all payments in the current session."})]}),h.length>0?e.jsx("div",{className:"activity-table-container",children:e.jsxs("table",{className:"activity-table history-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Reference"}),e.jsx("th",{children:"Fee(s)"}),e.jsx("th",{children:"Amount"}),e.jsx("th",{children:"Date"}),e.jsx("th",{children:"Method"})]})}),e.jsx("tbody",{children:h.map(s=>e.jsxs("tr",{children:[e.jsx("td",{className:"tx-ref",children:s.reference}),e.jsx("td",{className:"tx-fees",children:s.fees}),e.jsx("td",{className:"tx-amount",children:s.amount}),e.jsx("td",{className:"tx-date",children:s.date}),e.jsx("td",{children:s.method})]},s.id))})]})}):e.jsx("div",{className:"empty-state",children:e.jsx("p",{children:"No transactions found for this session."})})]}),i==="settings"&&e.jsxs("div",{className:"content-card danger-zone",children:[e.jsxs("div",{className:"card-header",children:[e.jsx("h3",{children:"Delete Student"}),e.jsx("p",{children:"Permanently remove this student and all associated data."})]}),e.jsxs("div",{className:"danger-actions",children:[e.jsx("p",{className:"warning-text",children:"Once deleted, this action cannot be undone. Please be certain."}),e.jsxs("button",{className:"btn-delete",onClick:f,children:[e.jsx(z,{size:18})," Delete Student Profile"]})]})]})]})]})]})};export{G as default};
