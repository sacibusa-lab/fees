import{r as l,j as s,H as u,R as p,a as N}from"./app-Biat6RVR.js";import{L as g}from"./Layout-DIydNzPb.js";import{S as f}from"./save-f-qrB8Be.js";import"./createLucideIcon-Cjv62a5S.js";const v=({roles:r=[],permissions:o=[]})=>{const m=o.reduce((e,a)=>(e[a.group_name]||(e[a.group_name]=[]),e[a.group_name].push(a),e),{}),[c,h]=l.useState(()=>{const e={};return r.forEach(a=>{a.permissions.forEach(i=>{e[`${a.id}_${i.id}`]=!0})}),e}),[t,d]=l.useState(!1),x=(e,a)=>{h(i=>({...i,[`${e}_${a}`]:!i[`${e}_${a}`]})),d(!0)},j=()=>{N.post("/admin-care/permissions",{matrix:c},{onSuccess:()=>d(!1)})};return s.jsxs(g,{children:[s.jsx(u,{title:"Role Permissions"}),s.jsxs("div",{className:"permissions-container",children:[s.jsxs("div",{className:"permissions-header",children:[s.jsx("h2",{className:"permissions-title",children:"Role Permissions"}),s.jsxs("button",{className:"btn-save",disabled:!t,onClick:j,style:{opacity:t?1:.5,cursor:t?"pointer":"default"},children:[s.jsx(f,{size:18}),"Save Changes"]})]}),s.jsx("div",{className:"permissions-card",children:s.jsxs("table",{className:"permissions-table",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{className:"module-header",children:"Module / Permission"}),r.map(e=>s.jsx("th",{className:"role-header",children:e.name},e.id))]})}),s.jsx("tbody",{children:Object.entries(m).map(([e,a])=>s.jsxs(p.Fragment,{children:[s.jsx("tr",{className:"group-header-row",children:s.jsx("td",{colSpan:r.length+1,children:e})}),a.map(i=>s.jsxs("tr",{className:"permission-row",children:[s.jsx("td",{className:"permission-name",children:i.name}),r.map(n=>s.jsx("td",{className:"checkbox-cell",children:s.jsxs("label",{className:"switch",children:[s.jsx("input",{type:"checkbox",checked:!!c[`${n.id}_${i.id}`],onChange:()=>x(n.id,i.id)}),s.jsx("span",{className:"slider round"})]})},n.id))]},i.id))]},e))})]})})]})]})};export{v as default};
