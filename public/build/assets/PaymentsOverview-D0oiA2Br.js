import{r as t,j as e,H as N}from"./app-Cg9hIWuz.js";import{L as b}from"./Layout-CblSXjeZ.js";import{c as g}from"./createLucideIcon-jhYRDOMX.js";const S=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],v=g("chevron-right",S),y=({isOpen:o,onClose:a,sessions:c,currentSession:n,currentTerm:m,onApply:x})=>{if(!o)return null;const[d,p]=t.useState(n),[i,j]=t.useState(m||"1st"),u=["1st","2nd","3rd"],h=()=>{x(d,i),a()};return e.jsx("div",{className:"period-modal-overlay",onClick:a,children:e.jsxs("div",{className:"period-modal-content",onClick:l=>l.stopPropagation(),children:[e.jsx("div",{className:"period-modal-header",children:e.jsx("h3",{children:"Select academic period"})}),e.jsxs("div",{className:"period-selection-container",children:[e.jsx("div",{className:"period-column",children:c.map(l=>e.jsx("button",{className:`period-option-btn ${d===l.name?"active":""}`,onClick:()=>p(l.name),children:l.name},l.id||l.name))}),e.jsx("div",{className:"period-column",children:u.map(l=>e.jsx("button",{className:`period-option-btn ${i===l?"active":""}`,onClick:()=>j(l),children:l},l))})]}),e.jsxs("div",{className:"period-modal-footer",children:[e.jsx("button",{className:"period-dismiss-btn",onClick:a,children:"Dismiss"}),e.jsx("button",{className:"period-apply-btn",onClick:h,children:"Apply"})]})]})})},T=({initialExpandedStats:o=[],initialPaymentBreakdown:a=[],sessions:c=[],fees:n=[]})=>{const[m,x]=t.useState(n[0]?.title||"School Fees"),[d,p]=t.useState(c.find(s=>s.is_current)?.name||"2023/2024"),[i,j]=t.useState("1st Term"),[u,h]=t.useState(!1),l=(s,r)=>{p(s),j(`${r} Term`)};return e.jsxs(b,{children:[e.jsx(N,{title:"Payments Overview"}),e.jsx("div",{className:"payments-overview",children:e.jsxs("div",{className:"expanded-view-content",children:[e.jsxs("div",{className:"filter-bar",children:[e.jsx("h3",{className:"section-title",children:"Expanded Summary"}),e.jsxs("div",{className:"filter-controls",children:[e.jsx("select",{className:"filter-select",value:m,onChange:s=>x(s.target.value),children:n.length>0?n.map(s=>e.jsx("option",{children:s.title},s.id)):e.jsx("option",{children:"School Fees"})}),e.jsxs("button",{className:"filter-select period-trigger-btn",onClick:()=>h(!0),style:{textAlign:"left",minWidth:"180px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("span",{children:[d," - ",i]}),e.jsx(v,{size:14,style:{transform:"rotate(90deg)"}})]})]})]}),e.jsx(y,{isOpen:u,onClose:()=>h(!1),sessions:c.length>0?c:[{name:"2023/2024"},{name:"2024/2025"}],currentSession:d,currentTerm:i.replace(" Term",""),onApply:l}),e.jsxs("div",{className:"metrics-grid",children:[o.map((s,r)=>e.jsxs("div",{className:"metric-card",children:[e.jsx("div",{className:"metric-header",children:e.jsx("span",{className:"metric-label",children:s.label})}),e.jsxs("div",{className:"metric-body",children:[e.jsx("span",{className:"metric-amount",children:s.amount}),e.jsx("span",{className:"metric-count",children:s.count})]})]},r)),o.length===0&&e.jsx("div",{className:"metric-card no-data",children:"No metrics available."})]}),e.jsxs("div",{className:"breakdown-table-section card",children:[e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"stats-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"S/N"}),e.jsx("th",{children:"Title"}),e.jsx("th",{children:"Flat Amount"}),e.jsx("th",{children:"Expected"}),e.jsx("th",{children:"Total Received"}),e.jsx("th",{children:"Completed"}),e.jsx("th",{children:"Part Payment"}),e.jsx("th",{children:"Debt"}),e.jsx("th",{children:"Progress (%)"}),e.jsx("th",{children:"Discount"}),e.jsx("th",{children:"Extra Charge"}),e.jsx("th",{})]})}),e.jsxs("tbody",{children:[a.map((s,r)=>e.jsxs("tr",{children:[e.jsx("td",{children:r+1}),e.jsx("td",{className:"title-cell",children:s.title}),e.jsx("td",{children:s.flatAmount.toLocaleString()}),e.jsx("td",{children:e.jsxs("div",{className:"amount-col",children:[e.jsx("span",{className:"amount-val",children:s.expected.split(" (")[0]}),e.jsxs("span",{className:"count-val",children:["(",s.expected.split(" (")[1]?.replace(")","")||0,")"]})]})}),e.jsx("td",{children:e.jsxs("div",{className:"amount-col",children:[e.jsx("span",{className:"amount-val",children:s.totalReceived.split(" (")[0]}),e.jsxs("span",{className:"count-val",children:["(",s.totalReceived.split(" (")[1]?.replace(")","")||0,")"]})]})}),e.jsx("td",{children:e.jsxs("div",{className:"amount-col",children:[e.jsx("span",{className:"amount-val",children:s.completed.split(" (")[0]}),e.jsxs("span",{className:"count-val",children:["(",s.completed.split(" (")[1]?.replace(")","")||0,")"]})]})}),e.jsx("td",{children:e.jsxs("div",{className:"amount-col",children:[e.jsx("span",{className:"amount-val",children:s.partPayment.split(" (")[0]}),e.jsxs("span",{className:"count-val",children:["(",s.partPayment.split(" (")[1]?.replace(")","")||0,")"]})]})}),e.jsx("td",{children:e.jsxs("div",{className:"amount-col",children:[e.jsx("span",{className:"amount-val",children:s.debt.split(" (")[0]}),e.jsxs("span",{className:"count-val",children:["(",s.debt.split(" (")[1]?.replace(")","")||0,")"]})]})}),e.jsxs("td",{children:[s.progress,"%"]}),e.jsx("td",{children:s.discount}),e.jsx("td",{children:s.extraCharge.toLocaleString()}),e.jsx("td",{children:e.jsx("button",{className:"row-action-btn",children:e.jsx(v,{size:18})})})]},s.id)),a.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:"12",style:{textAlign:"center",padding:"2rem"},children:"No breakdown data found."})})]})]})}),e.jsxs("div",{className:"table-pagination",children:[e.jsx("button",{className:"page-nav-btn disabled",children:"« Previous"}),e.jsx("div",{className:"page-numbers",children:e.jsx("button",{className:"page-num-btn active",children:"1"})}),e.jsx("button",{className:"page-nav-btn disabled",children:"Next »"})]})]})]})})]})};export{T as default};
