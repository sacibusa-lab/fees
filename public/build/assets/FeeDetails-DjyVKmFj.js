import{r as c,u as f,j as e,H as b,L as C,e as m}from"./app-Cw431tS5.js";import{L as w,C as S,A as h,S as k}from"./Layout-CtsOs9Ae.js";import{F as _}from"./FeeBeneficiariesModal-G4M6q91N.js";import{A as z}from"./StudentProfile-XM3OCU_5.js";import{I as A}from"./info-COsTkUMx.js";import{c as u}from"./createLucideIcon-Cz8fIWPk.js";import{S as M}from"./save-BXm_2YSZ.js";import{S as L}from"./square-pen-CjEbZtlN.js";import{T as B}from"./trash-2-3uUCkDpT.js";import"./circle-alert-Dm9_0hGG.js";import"./plus-DIwhttK9.js";const F=[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]],D=u("refresh-ccw",F);const T=[["path",{d:"M16 3h5v5",key:"1806ms"}],["path",{d:"M8 3H3v5",key:"15dfkv"}],["path",{d:"M12 22v-8.3a4 4 0 0 0-1.172-2.872L3 3",key:"1qrqzj"}],["path",{d:"m15 9 6-6",key:"ko1vev"}]],x=u("split",T),V=({fee:s})=>{const[t,r]=c.useState("details"),[p,o]=c.useState(!1),[$,R]=c.useState("edit"),{data:i,setData:l,put:j,processing:d,errors:n}=f({title:s.title,revenue_code:s.revenueCode,cycle:s.cycle.toLowerCase(),type:s.type.toLowerCase(),payee_allowed:s.payeeAllowed.toLowerCase(),amount:s.raw_amount,charge_bearer:s.chargeBear.toLowerCase(),status:s.status.toLowerCase()}),v=a=>{a.preventDefault(),j(`/fees/${s.id}`,{onSuccess:()=>alert("Fee updated successfully!")})},g=()=>{confirm("Are you sure you want to delete this fee?")&&m.delete(`/fees/${s.id}`)},y=()=>{m.put(`/fees/${s.id}/toggle-status`)};return e.jsxs(w,{children:[e.jsx(b,{title:`${s.title} - Details`}),e.jsxs("div",{className:"student-profile-container",children:[e.jsxs("div",{className:"profile-header",children:[e.jsxs(C,{href:"/fees",className:"back-link",children:[e.jsx(z,{size:20})," Back to Fees"]}),e.jsxs("div",{className:"profile-summary",children:[e.jsx("div",{className:"profile-avatar-large",style:{background:"#e3f2fd",color:"#1565c0"},children:e.jsx(S,{size:32})}),e.jsxs("div",{className:"profile-info-primary",children:[e.jsx("h1",{children:s.title}),e.jsxs("div",{className:"profile-meta",children:[e.jsx("span",{className:"meta-item",children:s.revenueCode}),e.jsx("span",{className:"meta-dot",children:"•"}),e.jsx("span",{className:"meta-item",children:s.cycle}),e.jsx("span",{className:"meta-dot",children:"•"}),e.jsx("span",{className:`status-pill ${s.status.toLowerCase()}`,children:s.status})]})]})]}),e.jsxs("div",{className:"profile-tabs",children:[e.jsxs("button",{className:`tab-item ${t==="details"?"active":""}`,onClick:()=>r("details"),children:[e.jsx(A,{size:18})," Details"]}),e.jsxs("button",{className:`tab-item ${t==="beneficiaries"?"active":""}`,onClick:()=>r("beneficiaries"),children:[e.jsx(x,{size:18})," Beneficiaries"]}),e.jsxs("button",{className:`tab-item ${t==="activity"?"active":""}`,onClick:()=>r("activity"),children:[e.jsx(h,{size:18})," Transactions"]}),e.jsxs("button",{className:`tab-item ${t==="settings"?"active":""}`,onClick:()=>r("settings"),children:[e.jsx(k,{size:18})," Settings"]})]})]}),e.jsxs("div",{className:"profile-content",children:[t==="details"&&e.jsxs("div",{className:"content-card",children:[e.jsxs("div",{className:"card-header",children:[e.jsx("h3",{children:"Fee Overview"}),e.jsx("p",{children:"Manage fee configuration and pricing."})]}),e.jsxs("form",{onSubmit:v,className:"profile-form",children:[e.jsxs("div",{className:"form-grid",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Fee Title"}),e.jsx("input",{type:"text",value:i.title,onChange:a=>l("title",a.target.value),className:n.title?"error":""}),n.title&&e.jsx("span",{className:"error-msg",children:n.title})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Revenue Code"}),e.jsx("input",{type:"text",value:i.revenue_code,onChange:a=>l("revenue_code",a.target.value),className:n.revenue_code?"error":""})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Amount (₦)"}),e.jsx("input",{type:"number",value:i.amount,onChange:a=>l("amount",a.target.value),className:n.amount?"error":""})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Cycle"}),e.jsxs("select",{value:i.cycle,onChange:a=>l("cycle",a.target.value),children:[e.jsx("option",{value:"termly",children:"Termly"}),e.jsx("option",{value:"annually",children:"Annually"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Type"}),e.jsxs("select",{value:i.type,onChange:a=>l("type",a.target.value),children:[e.jsx("option",{value:"compulsory",children:"Compulsory"}),e.jsx("option",{value:"optional",children:"Optional"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Payee Allowed"}),e.jsxs("select",{value:i.payee_allowed,onChange:a=>l("payee_allowed",a.target.value),children:[e.jsx("option",{value:"students",children:"Students"}),e.jsx("option",{value:"all",children:"All"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Charge Bearer"}),e.jsxs("select",{value:i.charge_bearer,onChange:a=>l("charge_bearer",a.target.value),children:[e.jsx("option",{value:"self",children:"Self"}),e.jsx("option",{value:"institution",children:"Institution"})]})]})]}),e.jsx("div",{className:"form-actions",children:e.jsxs("button",{type:"submit",className:"btn-save",disabled:d,children:[e.jsx(M,{size:18}),d?"Saving...":"Save Changes"]})})]})]}),t==="beneficiaries"&&e.jsxs("div",{className:"content-card",children:[e.jsxs("div",{className:"card-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsx("h3",{children:"Split Beneficiaries"}),e.jsx("p",{children:"Configure how revenue is distributed."})]}),e.jsxs("button",{className:"secondary-btn",onClick:()=>o(!0),children:[e.jsx(L,{size:16,style:{marginRight:"6px"}})," Manage Splits"]})]}),s.beneficiaries&&s.beneficiaries.length>0?e.jsx("div",{className:"accounts-list",children:s.beneficiaries.map((a,N)=>e.jsxs("div",{className:"account-item",children:[e.jsxs("div",{className:"bank-logo",style:{fontSize:"0.8rem",width:"40px",height:"40px"},children:[a.percentage,"%"]}),e.jsxs("div",{className:"account-details",children:[e.jsxs("h4",{children:[a.account_name," (",a.account_number,")"]}),e.jsx("div",{className:"account-number-row",children:e.jsx("span",{className:"acc-name",children:a.bank_name})})]})]},N))}):e.jsxs("div",{className:"empty-state",children:[e.jsx(x,{size:48,className:"text-gray-300"}),e.jsx("p",{children:"No beneficiaries configured. Fee goes 100% to main account."})]})]}),t==="activity"&&e.jsxs("div",{className:"content-card",children:[e.jsxs("div",{className:"card-header",children:[e.jsx("h3",{children:"Transactions"}),e.jsx("p",{children:"Recent payments for this fee."})]}),e.jsxs("div",{className:"empty-state",children:[e.jsx(h,{size:48,className:"text-gray-300"}),e.jsx("p",{children:"No transactions found."})]})]}),t==="settings"&&e.jsxs("div",{className:"content-card",children:[e.jsxs("div",{className:"card-header",children:[e.jsx("h3",{children:"Actions"}),e.jsx("p",{children:"Manage fee status and existence."})]}),e.jsxs("div",{className:"danger-actions",style:{borderBottom:"1px solid #eee",paddingBottom:"20px",marginBottom:"20px"},children:[e.jsx("h4",{style:{fontSize:"1rem",marginBottom:"8px",color:"#444"},children:"Fee Status"}),e.jsxs("p",{className:"warning-text",style:{color:"#666",marginBottom:"12px"},children:["Currently ",e.jsx("strong",{children:s.status}),". ",s.status==="Active"?"Deactivating will prevent new payments.":"Activating will allow payments."]}),e.jsxs("button",{className:"secondary-btn",onClick:y,style:{borderColor:"#ccc"},children:[e.jsx(D,{size:18,style:{marginRight:"8px"}}),s.status==="Active"?"Deactivate Fee":"Activate Fee"]})]}),e.jsxs("div",{className:"danger-actions",children:[e.jsx("h4",{style:{fontSize:"1rem",marginBottom:"8px",color:"#d32f2f"},children:"Delete Fee"}),e.jsx("p",{className:"warning-text",children:"Once deleted, this action cannot be undone."}),e.jsxs("button",{className:"btn-delete",onClick:g,children:[e.jsx(B,{size:18})," Delete Fee"]})]})]})]}),p&&e.jsx(_,{fee:{...s,id:s.id},onClose:()=>o(!1)})]})]})};export{V as default};
