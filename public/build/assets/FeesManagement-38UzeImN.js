import{r as d,u as M,j as e,H as _,a as T}from"./app-C8HvIe0m.js";import{L as k}from"./Layout-C4Qwkq89.js";import{F as B,a as P}from"./FeeClassOverridesModal-DJDK_om-.js";import{P as E}from"./plus-D-uii96b.js";import"./createLucideIcon-35dpXBfm.js";import"./circle-alert-DNs8Zd9l.js";import"./trash-2-DON8aOKf.js";import"./save-B6eKq9Wu.js";const I=({fees:o=[],feeCount:u=0,bankAccounts:p=[],classes:x=[]})=>{const[m,n]=d.useState(!1),[r,j]=d.useState("add"),[i,v]=d.useState(null),[g,y]=d.useState(!1),[N,b]=d.useState(!1),{data:l,setData:a,post:f,put:C,processing:h,reset:c,errors:t,clearErrors:S}=M({title:"",revenue_code:"",cycle:"termly",type:"compulsory",payee_allowed:"students",amount:"",charge_bearer:"self",status:"active"}),F=()=>{j("add"),v(null),c(),S(),n(!0)},w=s=>{s.preventDefault(),r==="add"?f("/fees",{onSuccess:()=>{n(!1),c()}}):C(`/fees/${i.id}`,{onSuccess:()=>{n(!1),c()}})};return e.jsxs(k,{children:[e.jsx(_,{title:`Fees - ${u}`}),e.jsxs("div",{className:"fees-page-container",children:[e.jsxs("div",{className:"fees-top-bar",children:[e.jsxs("h1",{className:"page-heading",children:["Fees - ",e.jsx("span",{className:"count",children:u})]}),e.jsxs("button",{className:"add-fee-btn-outline",onClick:F,children:[e.jsx(E,{size:18}),"Add Fee"]})]}),e.jsx("div",{className:"fees-table-wrapper card",children:e.jsx("div",{className:"table-scroll-area",children:e.jsxs("table",{className:"fees-data-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"S/N"}),e.jsx("th",{children:"Title"}),e.jsx("th",{children:"Revenue Code"}),e.jsx("th",{children:"Cycle"}),e.jsx("th",{children:"Type"}),e.jsx("th",{children:"Payers Allowed"}),e.jsx("th",{children:"Amount"}),e.jsx("th",{children:"Charge Bearer"}),e.jsx("th",{className:"status-col",children:"Status"})]})}),e.jsxs("tbody",{children:[o.map((s,A)=>e.jsxs("tr",{onClick:()=>T.visit(`/fees/${s.id}`),style:{cursor:"pointer"},children:[e.jsx("td",{children:A+1}),e.jsxs("td",{className:"title-cell-accent",children:[s.title,s.beneficiaries&&s.beneficiaries.length>0&&e.jsxs("span",{className:"split-badge",children:["Split (",s.beneficiaries.length,")"]})]}),e.jsx("td",{children:s.revenueCode}),e.jsx("td",{children:s.cycle}),e.jsx("td",{children:s.type}),e.jsx("td",{children:s.payeeAllowed}),e.jsx("td",{children:s.amount}),e.jsx("td",{children:s.chargeBear}),e.jsx("td",{children:e.jsxs("span",{className:`status-pill ${s.status.toLowerCase()}`,children:[e.jsx("span",{className:"pill-dot"}),s.status]})}),e.jsx("td",{className:"actions-cell"})]},s.id)),o.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:"10",className:"no-records",children:"No fees found."})})]})]})})}),m&&e.jsx("div",{className:"modal-overlay",onClick:()=>n(!1),children:e.jsxs("div",{className:`modal-content ${r==="set-amount"?"":"wide-modal"}`,onClick:s=>s.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{children:r==="add"?"Add New Fee":r==="edit"?"Edit Fee":"Set Fee Amount"}),e.jsx("button",{className:"close-btn",onClick:()=>n(!1),children:"×"})]}),e.jsxs("form",{onSubmit:w,className:"modern-fee-form",children:[r==="set-amount"?e.jsxs("div",{className:"input-group",children:[e.jsx("label",{children:"Amount (₦) *"}),e.jsx("input",{type:"number",value:l.amount,onChange:s=>a("amount",s.target.value),placeholder:"0",required:!0,autoFocus:!0}),t.amount&&e.jsx("span",{className:"error-msg",children:t.amount}),e.jsx("p",{style:{fontSize:"0.8rem",color:"#666",marginTop:"5px"},children:"This will update the fee amount for all students."})]}):e.jsxs("div",{className:"form-layout-grid",children:[e.jsxs("div",{className:"input-group",children:[e.jsx("label",{children:"Fee Title *"}),e.jsx("input",{type:"text",value:l.title,onChange:s=>a("title",s.target.value),placeholder:"e.g., 2nd Term School Fees",required:!0}),t.title&&e.jsx("span",{className:"error-msg",children:t.title})]}),e.jsxs("div",{className:"input-group",children:[e.jsx("label",{children:"Revenue Code *"}),e.jsx("input",{type:"text",value:l.revenue_code,onChange:s=>a("revenue_code",s.target.value),placeholder:"e.g., FNG7244210",required:!0}),t.revenue_code&&e.jsx("span",{className:"error-msg",children:t.revenue_code})]}),e.jsxs("div",{className:"input-group",children:[e.jsx("label",{children:"Cycle *"}),e.jsxs("select",{value:l.cycle,onChange:s=>a("cycle",s.target.value),children:[e.jsx("option",{value:"termly",children:"Termly"}),e.jsx("option",{value:"annually",children:"Annually"})]})]}),e.jsxs("div",{className:"input-group",children:[e.jsx("label",{children:"Type *"}),e.jsxs("select",{value:l.type,onChange:s=>a("type",s.target.value),children:[e.jsx("option",{value:"compulsory",children:"Compulsory"}),e.jsx("option",{value:"optional",children:"Optional"})]})]}),e.jsxs("div",{className:"input-group",children:[e.jsx("label",{children:"Payee Allowed *"}),e.jsxs("select",{value:l.payee_allowed,onChange:s=>a("payee_allowed",s.target.value),children:[e.jsx("option",{value:"students",children:"Students"}),e.jsx("option",{value:"all",children:"All"})]})]}),e.jsxs("div",{className:"input-group",children:[e.jsx("label",{children:"Amount (₦) *"}),e.jsx("input",{type:"number",value:l.amount,onChange:s=>a("amount",s.target.value),placeholder:"0",required:!0}),t.amount&&e.jsx("span",{className:"error-msg",children:t.amount})]}),e.jsxs("div",{className:"input-group",children:[e.jsx("label",{children:"Charge Bearer *"}),e.jsxs("select",{value:l.charge_bearer,onChange:s=>a("charge_bearer",s.target.value),children:[e.jsx("option",{value:"self",children:"Self"}),e.jsx("option",{value:"institution",children:"Institution"})]})]}),e.jsxs("div",{className:"input-group",children:[e.jsx("label",{children:"Status *"}),e.jsxs("select",{value:l.status,onChange:s=>a("status",s.target.value),children:[e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"})]})]})]}),e.jsxs("div",{className:"modal-footer-actions",children:[e.jsx("button",{type:"button",className:"secondary-btn",onClick:()=>n(!1),children:"Cancel"}),e.jsx("button",{type:"submit",className:"primary-btn",disabled:h,children:h?"Processing...":r==="add"?"Add Fee":"Save Changes"})]})]})]})}),g&&i&&e.jsx(B,{fee:i,onClose:()=>y(!1),bankAccounts:p}),N&&i&&e.jsx(P,{fee:i,classes:x,onClose:()=>b(!1)})]})]})};export{I as default};
