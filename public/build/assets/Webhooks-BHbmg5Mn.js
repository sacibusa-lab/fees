import{r as l,j as e,H as n}from"./app-py5_dQwR.js";import d from"./SettingsLayout-BL-eGHl3.js";import{C as a}from"./circle-check-big-BM0iFkeD.js";import{C as c}from"./circle-x-BXGfC1WA.js";import{c as o}from"./createLucideIcon-vPTwZ-GI.js";import{E as x}from"./eye-BtGzMEHx.js";import"./Layout-Ch7LC_aF.js";const h=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],m=o("clock",h),b=({webhooks:i=[]})=>{const[t,r]=l.useState(null);return e.jsxs(d,{title:"Webhook Monitoring",children:[e.jsx(n,{title:"Webhook Monitoring - Settings"}),e.jsxs("div",{className:"content-card",children:[e.jsx("div",{className:"card-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:e.jsxs("div",{children:[e.jsx("h3",{children:"Incoming Events"}),e.jsx("p",{children:"Track and debug automated messages from Paystack."})]})}),e.jsx("div",{className:"table-container",style:{marginTop:"20px"},children:e.jsxs("table",{className:"modern-table",style:{width:"100%"},children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Event Type"}),e.jsx("th",{children:"Reference"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Processed At"}),e.jsx("th",{children:"Action"})]})}),e.jsx("tbody",{children:i.length>0?i.map(s=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("strong",{children:s.event_type})}),e.jsx("td",{children:s.reference||"N/A"}),e.jsx("td",{children:e.jsxs("span",{className:`status-pill ${s.status}`,children:[s.status==="processed"?e.jsx(a,{size:14,style:{marginRight:"4px"}}):s.status==="failed"?e.jsx(c,{size:14,style:{marginRight:"4px"}}):e.jsx(m,{size:14,style:{marginRight:"4px"}}),s.status]})}),e.jsx("td",{children:s.date}),e.jsx("td",{children:e.jsx("button",{className:"btn-icon",onClick:()=>r(s),title:"View Payload",children:e.jsx(x,{size:18})})})]},s.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:"5",style:{textAlign:"center",padding:"2rem"},children:"No webhook events logged yet."})})})]})})]}),t&&e.jsx("div",{className:"override-modal-overlay",onClick:()=>r(null),children:e.jsxs("div",{className:"override-modal-content",style:{maxWidth:"600px"},onClick:s=>s.stopPropagation(),children:[e.jsx("div",{className:"override-modal-header",children:e.jsxs("div",{children:[e.jsx("h3",{children:"Event Payload"}),e.jsxs("p",{className:"subtitle",children:[t.event_type," â€¢ ",t.reference]})]})}),e.jsxs("div",{style:{padding:"20px",maxHeight:"400px",overflowY:"auto"},children:[e.jsx("pre",{style:{background:"#f5f5f5",padding:"15px",borderRadius:"8px",fontSize:"0.85rem"},children:JSON.stringify(t.payload,null,2)}),t.error_message&&e.jsxs("div",{style:{marginTop:"15px",padding:"10px",background:"#fff1f2",border:"1px solid #fecaca",borderRadius:"4px",color:"#b91c1c"},children:[e.jsx("strong",{children:"Error:"})," ",t.error_message]})]}),e.jsx("div",{className:"modal-footer",children:e.jsx("button",{className:"secondary-btn",onClick:()=>r(null),children:"Close"})})]})})]})};export{b as default};
